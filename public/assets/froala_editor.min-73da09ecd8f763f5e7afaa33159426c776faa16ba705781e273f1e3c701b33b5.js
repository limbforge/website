/*!
 * froala_editor v2.0.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms
 * Copyright 2014-2015 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";var t=function(n,o){this.opts=e.extend({},t.DEFAULTS,e(n).data(),"object"==typeof o&&o),this.$original_element=e(n),this.$original_element.data("froala.editor",this),this.id=++e.FroalaEditor.ID,this.original_document=n.ownerDocument,this.original_window="defaultView"in this.original_document?this.original_document.defaultView:this.original_document.parentWindow;var r=e(this.original_window).scrollTop();this.$original_element.on("froala.doInit",e.proxy(function(){this.$original_element.off("froala.doInit"),this.document=this.$el.get(0).ownerDocument,this.window="defaultView"in this.document?this.document.defaultView:this.document.parentWindow,this.$document=e(this.document),this.$window=e(this.window),this.opts.initOnClick?(this.load(e.FroalaEditor.MODULES),this.$el.on("mousedown.init dragenter.init focus.init",e.proxy(function(t){if(1===t.which){this.$el.off("mousedown.init dragenter.init focus.init"),this.load(e.FroalaEditor.MODULES),this.load(e.FroalaEditor.PLUGINS);var n=t.originalEvent&&t.originalEvent.originalTarget;n&&"IMG"==n.tagName&&e(n).trigger("mousedown"),"undefined"==typeof this.ul&&this.destroy(),this.events.trigger("initialized")}},this))):(this.load(e.FroalaEditor.MODULES),this.load(e.FroalaEditor.PLUGINS),e(this.original_window).scrollTop(r),"undefined"==typeof this.ul&&this.destroy(),this.events.trigger("initialized"))},this)),this._init()};t.DEFAULTS={initOnClick:!1},t.MODULES={},t.PLUGINS={},t.VERSION="2.0.5",t.INSTANCES=[],t.ID=0,t.prototype._init=function(){var t=this.$original_element.prop("tagName"),n=e.proxy(function(){this._original_html=this._original_html||this.$original_element.html(),this.$box=this.$box||this.$original_element,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$original_element.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$original_element.trigger("froala.doInit"))},this),o=e.proxy(function(){this.$box=e("<div>"),this.$original_element.before(this.$box).hide(),this._original_html=this.$original_element.val(),this.$original_element.parents("form").on("submit."+this.id,e.proxy(function(){this.events.trigger("form.submit")},this)),n()},this),r=e.proxy(function(){this.$el=this.$original_element,this.$el.attr("contenteditable",!0).css("outline","none"),this.opts.multiLine=!1,this.$original_element.trigger("froala.doInit")},this),i=e.proxy(function(){this.$el=this.$original_element,this.$original_element.trigger("froala.doInit")},this),a=e.proxy(function(){this.$el=this.$original_element,this.$original_element.trigger("froala.doInit")},this);this.opts.editInPopup?a():"TEXTAREA"==t?o():"A"==t?r():"IMG"==t?i():"BUTTON"==t?(this.opts.editInPopup=!0,a()):("DIV"!==t&&(this.opts.enter=e.FroalaEditor.ENTER_BR),n())},t.prototype.load=function(e){for(var t in e)if(!this[t]&&(this[t]=new e[t](this),this[t]._init&&(this[t]._init(),this.opts.initOnClick&&"core"==t)))return!1},t.prototype.destroy=function(){this.events.trigger("destroy"),this.$original_element.parents("form").off("submit."+this.id),this.$original_element.removeData("froala.editor")},e.fn.froalaEditor=function(n){for(var o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);if("string"==typeof n){var i=[];return this.each(function(){var t=e(this),r=t.data("froala.editor");if(r){var a,l;if(n.indexOf(".")>0&&r[n.split(".")[0]]?(r[n.split(".")[0]]&&(a=r[n.split(".")[0]]),l=n.split(".")[1]):(a=r,l=n.split(".")[0]),!a[l])return e.error("Method "+n+" does not exist in Froala Editor.");var s=a[l].apply(r,o.slice(1));void 0===s?i.push(this):0===i.length&&i.push(s)}}),1==i.length?i[0]:i}return"object"!=typeof n&&n?void 0:this.each(function(){var o=e(this).data("froala.editor");o||new t(this,n)})},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FroalaEditor.MODULES.node=function(t){function n(t){return t&&"IFRAME"!=t.tagName?e(t).contents():[]}function o(t){return t?t.nodeType!=Node.ELEMENT_NODE?!1:e.FroalaEditor.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0:!1}function r(t,r){if(e(t).find("table").length>0)return!1;var i=n(t);1==i.length&&o(i[0])&&(i=n(i[0]));for(var a=!1,l=0;l<i.length;l++){var s=i[l];if(!r||!e(s).hasClass("fr-marker")){if(!("BR"==s.tagName||s.textContent&&0==s.textContent.replace(/\u200B/gi,"").length)||1==a)return!1;"BR"==s.tagName&&(a=!0)}}return!0}function i(n){for(;n&&n.parentNode!==t.$el.get(0)&&(!n.parentNode||!e(n.parentNode).hasClass("fr-inner"));)if(n=n.parentNode,o(n))return n;return null}function a(n,r,i){if("undefined"==typeof r&&(r=[]),"undefined"==typeof i&&(i=!0),r.push(t.$el.get(0)),r.indexOf(n.parentNode)>=0||n.parentNode&&e(n.parentNode).hasClass("fr-inner")||n.parentNode&&e.FroalaEditor.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&i)return null;for(;r.indexOf(n.parentNode)<0&&n.parentNode&&!e(n.parentNode).hasClass("fr-inner")&&(e.FroalaEditor.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!i)&&(!o(n)||!o(n.parentNode)||!i);)n=n.parentNode;return n}function l(e){var t={},n=e.attributes;if(n)for(var o=0;o<n.length;o++){var r=n[o];t[r.nodeName]=r.value}return t}function s(e){for(var t="",n=l(e),o=Object.keys(n).sort(),r=0;r<o.length;r++){var i=o[r],a=n[i];t+=a.indexOf('"')<0?" "+i+'="'+a+'"':" "+i+"='"+a+"'"}return t}function d(e){for(var t=e.attributes,n=0;n<t.length;n++){var o=t[n];e.removeAttribute(o.nodeName)}}function c(e){return"<"+e.tagName.toLowerCase()+s(e)+">"}function f(e){return"</"+e.tagName.toLowerCase()+">"}function p(t,n){"undefined"==typeof n&&(n=!0);for(var o=t.previousSibling;o&&n&&e(o).hasClass("fr-marker");)o=o.previousSibling;return o?o.nodeType==Node.TEXT_NODE&&""===o.textContent?p(o):!1:!0}function u(t){return t&&e.FroalaEditor.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0}function g(e){return e?["UL","OL"].indexOf(e.tagName)>=0:!1}function h(e){return e===t.$el.get(0)}function m(e){return e===t.document.activeElement&&(!t.document.hasFocus||t.document.hasFocus())&&!!(h(e)||e.type||e.href||~e.tabIndex)}function v(e){return!e.getAttribute||"false"!=e.getAttribute("contenteditable")}return{isBlock:o,isEmpty:r,blockParent:i,deepestParent:a,rawAttributes:l,attributes:s,clearAttributes:d,openTagString:c,closeTagString:f,isFirstSibling:p,isList:g,isElement:h,contents:n,isVoid:u,hasFocus:m,isEditable:v}},e.extend(e.FroalaEditor.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","fr-.*","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowComments:!0,fullPage:!1}),e.FroalaEditor.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FroalaEditor.MODULES.clean=function(t){function n(e){if(e.className&&e.className.indexOf("fr-marker")>=0)return!1;var o,r=t.node.contents(e),i=[];for(o=0;o<r.length;o++)r[o].className&&r[o].className.indexOf("fr-marker")>=0&&i.push(r[o]);if(r.length-i.length==1&&0===e.textContent.replace(/\u200b/g,"").length){for(o=0;o<i.length;o++)e.parentNode.insertBefore(i[o].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}for(o=0;o<r.length;o++)r[o].nodeType==Node.ELEMENT_NODE?r[o].textContent.replace(/\u200b/g,"").length!=r[o].textContent.length&&n(r[o]):r[o].nodeType==Node.TEXT_NODE&&(r[o].textContent=r[o].textContent.replace(/\u200b/g,""))}function o(e){if(e.nodeType==Node.COMMENT_NODE)return"<!--"+e.nodeValue+"-->";if(e.nodeType==Node.TEXT_NODE)return e.textContent.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\u00A0/g,"&nbsp;");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if("IFRAME"==e.tagName)return e.outerHTML;var n=e.childNodes;if(0===n.length)return e.outerHTML;for(var r="",i=0;i<n.length;i++)r+=o(n[i]);return t.node.openTagString(e)+r+t.node.closeTagString(e)}function r(e){return N=[],e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return N.push(e),"<!--[FROALA.EDITOR.SCRIPT "+(N.length-1)+"]-->"}),e=e.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-src="')}function i(e){return e=e.replace(/<!--\[FROALA\.EDITOR\.SCRIPT ([\d]*)]-->/gi,function(e,t){return N[parseInt(t,10)]}),t.opts.htmlRemoveTags.indexOf("script")>=0&&(e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")),e=e.replace(/<img((?:[\w\W]*?)) data-src="/g,'<img$1 src="')}function a(e){var t;for(t in e)t.match(y)||delete e[t];for(var n="",o=Object.keys(e).sort(),r=0;r<o.length;r++)t=o[r],n+=e[t].indexOf('"')<0?" "+t+'="'+e[t]+'"':" "+t+"='"+e[t]+"'";return n}function l(e,n,o){if(t.opts.fullPage){var r=t.html.extractDoctype(o),i=a(t.html.extractNodeAttrs(o,"html"));n=null==n?t.html.extractNode(o,"head")||"<title></title>":n;var l=a(t.html.extractNodeAttrs(o,"head")),s=a(t.html.extractNodeAttrs(o,"body"));return r+"<html"+i+"><head"+l+">"+n+"</head><body"+s+">"+e+"</body></html>"}return e}function s(n,r){var i=e("<div>"+n+"</div>"),a="";if(i){for(var l=t.node.contents(i.get(0)),s=0;s<l.length;s++)r(l[s]);l=t.node.contents(i.get(0));for(var s=0;s<l.length;s++)a+=o(l[s])}return a}function d(e,n,o){e=r(e);var a=e,d=null;if(t.opts.fullPage){var a=(t.html.extractNode(e,"body")||e).replace(/\r|\n/g,"");o&&(d=(t.html.extractNode(e,"head")||"").replace(/\r|\n/g,""))}a=s(a,n),d&&(d=s(d,n));var c=l(a,d,e).replace(/\r|\n/g,"");return i(c)}function c(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,n)}function f(){var n=t.$el.find(Object.keys(e.FroalaEditor.HTML5Map).join(",")).filter(function(){return""===t.node.attributes(this)});n.length&&(t.selection.save(),n.each(function(){e(this).replaceWith("<"+e.FroalaEditor.HTML5Map[this.tagName]+">"+e(this).html()+"</"+e.FroalaEditor.HTML5Map[this.tagName]+">")}),t.selection.restore())}function p(n){if("PRE"==n.tagName&&g(n),n.nodeType==Node.ELEMENT_NODE&&(n.getAttribute("data-src")&&n.setAttribute("data-src",t.helpers.sanitizeURL(n.getAttribute("data-src"))),n.getAttribute("href")&&n.setAttribute("href",t.helpers.sanitizeURL(n.getAttribute("href"))),["TABLE","TBODY","TFOOT","TR"].indexOf(n.tagName)>=0&&(n.innerHTML=n.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&n.nodeType==Node.ELEMENT_NODE&&"IMG"==n.tagName&&n.getAttribute("data-src")&&0==n.getAttribute("data-src").indexOf("file://"))return n.parentNode.removeChild(n),!1;if(n.nodeType==Node.ELEMENT_NODE&&e.FroalaEditor.HTML5Map[n.tagName]&&""===t.node.attributes(n)){var o=e.FroalaEditor.HTML5Map[n.tagName],r="<"+o+">"+n.innerHTML+"</"+o+">";n.insertAdjacentHTML("beforebegin",r),n=n.previousSibling,n.parentNode.removeChild(n.nextSibling)}if(t.opts.htmlAllowComments||n.nodeType!=Node.COMMENT_NODE)if(n.tagName&&n.tagName.match(T))n.parentNode.removeChild(n);else if(n.tagName&&!n.tagName.match(S))n.outerHTML=n.innerHTML;else{var i=n.attributes;if(i)for(var a=i.length-1;a>=0;a--){var l=i[a];l.nodeName.match(y)||n.removeAttribute(l.nodeName)}}else 0!==n.data.indexOf("[FROALA.EDITOR")&&n.parentNode.removeChild(n)}function u(e){for(var n=t.node.contents(e),o=0;o<n.length;o++)n[o].nodeType!=Node.TEXT_NODE&&u(n[o]);p(e)}function g(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function h(n,o,r,i){"undefined"==typeof o&&(o=[]),"undefined"==typeof r&&(r=[]),"undefined"==typeof i&&(i=!1),n=n.replace(/\u0009/g,"");var a,l=e.merge([],t.opts.htmlAllowedTags);for(a=0;a<o.length;a++)l.indexOf(o[a])>=0&&l.splice(l.indexOf(o[a]),1);var s=e.merge([],t.opts.htmlAllowedAttrs);for(a=0;a<r.length;a++)s.indexOf(r[a])>=0&&s.splice(s.indexOf(r[a]),1);return S=new RegExp("^"+l.join("$|^")+"$","gi"),y=new RegExp("^"+s.join("$|^")+"$","gi"),T=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),n=d(n,u,!0)}function m(){for(var n=t.$el.find("blockquote + blockquote"),o=0;o<n.length;o++){var r=e(n[o]);t.node.attributes(n[o])==t.node.attributes(r.prev().get(0))&&(r.prev().append(r.html()),r.remove())}}function v(){for(var n=t.$el.find("tr").filter(function(){return e(this).find("th").length>0}),o=0;o<n.length;o++){var r=e(n[o]).parents("table:first").find("thead");0===r.length&&(r=e("<thead>"),e(n[o]).parents("table:first").prepend(r),r.append(n[o]))}t.$el.find("table").filter(function(){for(var e=this.previousSibling;e&&e.nodeType==Node.TEXT_NODE&&0==e.textContent.length;)e=e.previousSibling;return e&&!t.node.isBlock(e)&&"BR"!=e.tagName?!0:!1}).before("<br>");var i=t.html.defaultTag();i&&t.$el.find("td > "+i+", th > "+i).each(function(){""===t.node.attributes(this)&&e(this).replaceWith(this.innerHTML+"<br>")})}function E(){for(var n=t.$el.find("ol + ol, ul + ul"),o=0;o<n.length;o++){var r=e(n[o]);t.node.attributes(n[o])==t.node.attributes(r.prev().get(0))&&(r.prev().append(r.html()),r.remove())}var i=[],a=function(){return!t.node.isList(this.parentNode)};do{if(i.length){var l=i.get(0),s=e("<ul></ul>").insertBefore(e(l));do{var d=l;l=l.nextSibling,s.append(e(d))}while(l&&"LI"==l.tagName)}i=t.$el.find("li").filter(a)}while(i.length>0);var c,f=function(t,n){var o=e(n);0===o.find("LI").length&&(c=!0,o.remove())};do c=!1,t.$el.find("li:empty").remove(),t.$el.find("ul, ol").each(f);while(c===!0);for(var p=t.$el.find("ol, ul").find("> ul, > ol"),u=0;u<p.length;u++){var g=p[u],h=g.previousSibling;h&&("LI"==h.tagName?e(h).append(g):e(g).wrap("<li></li>"))}t.$el.find("li > ul, li > ol").each(function(t,n){if(n.nextSibling){var o=n.nextSibling,r=e("<li>");e(n.parentNode).after(r);do{var i=o;o=o.nextSibling,r.append(i)}while(o)}}),t.$el.find("li > ul, li > ol").each(function(n,o){if(t.node.isFirstSibling(o))e(o).before("<br/>");else if(o.previousSibling&&"BR"==o.previousSibling.tagName){for(var r=o.previousSibling.previousSibling;r&&e(r).hasClass("fr-marker");)r=r.previousSibling;r&&"BR"!=r.tagName&&e(o.previousSibling).remove()}}),t.$el.find("li:empty").remove()}function b(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html"])}var S,T,y,N=[],N=[];return{_init:b,html:h,toHTML5:f,tables:v,lists:E,quotes:m,invisibleSpaces:c,exec:d}},e.FroalaEditor.XS=0,e.FroalaEditor.SM=1,e.FroalaEditor.MD=2,e.FroalaEditor.LG=3,e.FroalaEditor.MODULES.helpers=function(t){function n(){var e,t,n=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))),n}function o(){var e={};if(n()>0)e.msie=!0;else{var t=navigator.userAgent.toLowerCase(),o=/(edge)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],r={browser:o[1]||"",version:o[2]||"0"};o[1]&&(e[r.browser]=!0),parseInt(r.version,10)<9&&e.msie&&(e.oldMsie=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e}function r(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!l()}function i(){return/(Android)/g.test(navigator.userAgent)&&!l()}function a(){return/(Blackberry)/g.test(navigator.userAgent)}function l(){return/(Windows Phone)/gi.test(navigator.userAgent)}function s(){return i()||r()||a()}function d(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function c(e){return parseInt(e,10)||0}function f(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body"),n=c(t.css("margin-left"));return t.remove(),n}function p(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function u(e){if(!/^(https?:|ftps?:|)\/\//.test(e))return!1;e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20");var t=/\(?(?:(https?:|ftps?:|)\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|(?:www.)?(?:[^\W\s]|\.|-)|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/gi;return t.test(e)}function g(e){if(/^(https?:|ftps?:|)\/\//.test(e)){if(!u(e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/g,"mailto:").replace(/file%3A/g,"file:").replace(/sms%3A/g,"sms:").replace(/tel%3A/g,"tel:").replace(/data%3Aimage/g,"data:image").replace(/webkit-fake-url%3A/g,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@");return e}function h(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function m(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(n){return null}}function v(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,o){return t+t+n+n+o+o});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""}function E(t){var n=(t.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(n)<0){if(!S){var o=e('<div dir="auto" style="text-align: initial; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body").append(o);var r=o.find("#s1").get(0).getBoundingClientRect().left,i=o.find("#s2").get(0).getBoundingClientRect().left;o.remove(),S=i>r?"left":"right"}n=S}return n}function b(){t.browser=o(),t.ie_version=n()}var S;return{_init:b,isIOS:r,isAndroid:i,isBlackberry:a,isWindowsPhone:l,isMobile:s,requestAnimationFrame:d,getPX:c,screenSize:f,isTouch:p,sanitizeURL:g,isArray:h,RGBToHex:m,HEXtoRGB:v,isURL:u,getAlignment:E}},e.FroalaEditor.MODULES.events=function(t){function n(e,n,o){e.on(n.split(" ").join("."+t.id+" ")+"."+t.id,o),v("destroy",function(){e.off(n.split(" ").join("."+t.id+" ")+"."+t.id)})}function o(){n(t.$el,"cut copy paste beforepaste",function(e){E(e.type,[e])})}function r(){n(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop",function(e){E(e.type,[e])})}function i(){n(t.$el,"keydown keypress keyup input",function(e){E(e.type,[e])})}function a(){n(t.$window,t._mousedown,function(e){E("window.mousedown",[e]),u()}),n(t.$window,t._mouseup,function(e){E("window.mouseup",[e])}),n(t.$window,"keydown keyup touchmove",function(e){E("window."+e.type,[e])})}function l(){n(t.$document,"drop",function(e){E("document.drop",[e])})}function s(n){if("undefined"==typeof n&&(n=!0),!t.$wp)return!1;if(!t.core.hasFocus()&&n)return t.$el.focus(),!1;if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;var o=t.selection.info(t.$el.get(0));if(o.atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var r=t.markers.insert();if(r&&!t.node.blockParent(r)){e(r).remove();var i=t.$el.find(t.html.blockTagsQuery()).get(0);i&&(e(i).prepend(e.FroalaEditor.MARKERS),t.selection.restore())}else r&&e(r).remove()}}function d(){n(t.$el,"focus",function(e){h()&&(s(!1),C===!1&&E(e.type,[e]))}),n(t.$el,"blur",function(e){h()&&C===!0&&E(e.type,[e])}),v("focus",function(){C=!0}),v("blur",function(){C=!1})}function c(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function f(n){var o=e(n.currentTarget);return t.edit.isDisabled()||o.hasClass("fr-disabled")?(n.preventDefault(),!1):"mousedown"===n.type&&1!==n.which?!0:(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===o.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),o.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[o]))}function p(n,o){var r=e(n.currentTarget);if(t.edit.isDisabled()||r.hasClass("fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!r.hasClass("fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!r.hasClass("fr-selected"))return e(".fr-selected").removeClass("fr-selected"),!1;if(e(".fr-selected").removeClass("fr-selected"),r.data("dragging")||r.attr("disabled"))return r.removeData("dragging"),!1;var i=r.data("timeout");i&&(clearTimeout(i),r.removeData("timeout")),o.apply(t,[n])}else r.data("timeout")||r.data("timeout",setTimeout(function(){r.data("dragging",!0)},100))}function u(){y=!0}function g(){y=!1}function h(){return y}function m(e,n,o){e.on(t._mousedown,n,function(e){f(e)}),e.on(t._mouseup+" "+t._move,n,function(e){p(e,o)}),e.on("mousedown click mouseup",n,function(e){e.stopPropagation()}),v("window.mouseup",function(){e.find(n).removeClass("fr-selected"),u()}),v("destroy",function(){e.off(t._mousedown,n),e.off(t._mouseup+" "+t._move)})}function v(e,t,n){"undefined"==typeof n&&(n=!1);var o=N[e]=N[e]||[];n?o.unshift(t):o.push(t)}function E(n,o,r){if(!t.edit.isDisabled()||r){var i,a=N[n];if(a)for(var l=0;l<a.length;l++)if(i=a[l].apply(t,o),i===!1)return!1;return i=t.$original_element.triggerHandler("froalaEditor."+n,e.merge([t],o||[])),i===!1?!1:i}}function b(n,o,r){if(!t.edit.isDisabled()||r){var i,a=N[n];if(a)for(var l=0;l<a.length;l++)i=a[l].apply(t,[o]),"undefined"!=typeof i&&(o=i);return i=t.$original_element.triggerHandler("froalaEditor."+n,e.merge([t],[o])),"undefined"!=typeof i&&(o=i),o}}function S(){for(var e in N)delete N[e]}function T(){c(),r(),a(),l(),i(),d(),u(),o(),v("destroy",S)}var y,N={},C=!1;return{_init:T,on:v,trigger:E,bindClick:m,disableBlur:g,enableBlur:u,blurActive:h,focus:s,chainTrigger:b}},e.FroalaEditor.INVISIBLE_SPACE="&#8203;",e.FroalaEditor.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FroalaEditor.INVISIBLE_SPACE+"</span>",e.FroalaEditor.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FroalaEditor.INVISIBLE_SPACE+"</span>",e.FroalaEditor.MARKERS=e.FroalaEditor.START_MARKER+e.FroalaEditor.END_MARKER,e.FroalaEditor.MODULES.markers=function(t){function n(n,o){return e('<span class="fr-marker" data-id="'+o+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FroalaEditor.INVISIBLE_SPACE+"</span>",t.document)[0]}function o(o,r,i){try{var a=o.cloneRange();if(a.collapse(r),a.insertNode(n(r,i)),r===!0&&o.collapsed)for(var l=t.$el.find('span.fr-marker[data-type="true"][data-id="'+i+'"]').get(0).nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=t.$el.find('span.fr-marker[data-type="true"][data-id="'+i+'"]').get(0).nextSibling;if(r===!0&&!o.collapsed){var r=t.$el.find('span.fr-marker[data-type="true"][data-id="'+i+'"]').get(0),l=r.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var s=[l];do l=s[0],s=t.node.contents(l);while(s[0]&&t.node.isBlock(s[0]));e(l).prepend(e(r))}}if(r===!1&&!o.collapsed){var r=t.$el.find('span.fr-marker[data-type="false"][data-id="'+i+'"]').get(0),l=r.previousSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var s=[l];do l=s[s.length-1],s=t.node.contents(l);while(s[s.length-1]&&t.node.isBlock(s[s.length-1]));e(l).append(e(r))}r.parentNode&&["TD","TH"].indexOf(r.parentNode.tagName)>=0&&r.parentNode.previousSibling&&!r.previousSibling&&e(r.parentNode.previousSibling).append(r)}return r}catch(d){return null}}function r(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),o=n.commonAncestorContainer;if(o!=t.$el.get(0)&&0==t.$el.find(o).length)return null;var r=n.cloneRange(),i=n.cloneRange();r.collapse(!0);var a=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FroalaEditor.INVISIBLE_SPACE+"</span>",t.document)[0];if(r.insertNode(a),a=t.$el.find("span.fr-marker").get(0)){for(var l=a.nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(i),a}return null}catch(s){}}function i(e){var n=e.clientX,o=e.clientY;a();var i,l=null;if("undefined"!=typeof t.document.caretPositionFromPoint?(i=t.document.caretPositionFromPoint(n,o),l=t.document.createRange(),l.setStart(i.offsetNode,i.offset),l.setEnd(i.offsetNode,i.offset)):"undefined"!=typeof t.document.caretRangeFromPoint&&(i=t.document.caretRangeFromPoint(n,o),l=t.document.createRange(),l.setStart(i.startContainer,i.startOffset),l.setEnd(i.startContainer,i.startOffset)),null!==l&&"undefined"!=typeof t.window.getSelection){var s=t.window.getSelection();s.removeAllRanges(),s.addRange(l)}else if("undefined"!=typeof t.document.body.createTextRange)try{l=t.document.body.createTextRange(),l.moveToPoint(n,o);var d=l.duplicate();d.moveToPoint(n,o),l.setEndPoint("EndToEnd",d),l.select()}catch(c){}r()}function a(){t.$el.find(".fr-marker").remove()}return{place:o,insert:r,insertAtPoint:i,remove:a}},e.FroalaEditor.MODULES.selection=function(t){function n(){var e="";return t.window.getSelection?e=t.window.getSelection():t.document.getSelection?e=t.document.getSelection():t.document.selection&&(e=t.document.selection.createRange().text),e.toString()}function o(){var e="";return e=t.window.getSelection?t.window.getSelection():t.document.getSelection?t.document.getSelection():t.document.selection.createRange()}function r(e){var n=o(),r=[];if(n&&n.getRangeAt&&n.rangeCount)for(var r=[],i=0;i<n.rangeCount;i++)r.push(n.getRangeAt(i));else r=t.document.createRange?[t.document.createRange()]:[];return"undefined"!=typeof e?r[e]:r}function i(){var e=o();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(t){}}function a(){var i=o();try{if(i.rangeCount){var a=r(0),l=a.startContainer;if(l.nodeType==Node.ELEMENT_NODE){var s=!1;if(l.childNodes.length>0&&l.childNodes[a.startOffset]){for(var d=l.childNodes[a.startOffset];d&&d.nodeType==Node.TEXT_NODE&&0==d.textContent.length;)d=d.nextSibling;d&&d.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=d,s=!0)}else if(!a.collapsed&&l.nextSibling&&l.nextSibling.nodeType==Node.ELEMENT_NODE){var d=l.nextSibling;d&&d.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=d,s=!0)}!s&&l.childNodes.length>0&&e(l.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(l.childNodes[0].tagName)<0&&(l=l.childNodes[0])}for(;l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var c=l;c&&"HTML"!=c.tagName;){if(c==t.$el.get(0))return l;c=e(c).parent()[0]}}}catch(f){}return t.$el.get(0)}function l(){var i=o();try{if(i.rangeCount){var a=r(0),l=a.endContainer;if(l.nodeType==Node.ELEMENT_NODE){var s=!1;if(l.childNodes.length>0&&l.childNodes[a.endOffset]&&e(l.childNodes[a.endOffset]).text()===n())l=l.childNodes[a.endOffset],s=!0;else if(!a.collapsed&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE){var d=l.previousSibling;d&&d.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=d,s=!0)}!s&&l.childNodes.length>0&&e(l.childNodes[l.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(l.childNodes[l.childNodes.length-1].tagName)<0&&(l=l.childNodes[l.childNodes.length-1])}for(l.nodeType==Node.TEXT_NODE&&0==a.endOffset&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE&&(l=l.previousSibling);l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var c=l;c&&"HTML"!=c.tagName;){if(c==t.$el.get(0))return l;c=e(c).parent()[0]}}}catch(f){}return t.$el.get(0)}function s(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function d(){var n=[],i=o();if(b()&&i.rangeCount)for(var a=r(),l=0;l<a.length;l++){var d=a[l],c=s(d.startContainer,d.startOffset),f=s(d.endContainer,d.endOffset);t.node.isBlock(c)&&n.indexOf(c)<0&&n.push(c);var p=t.node.blockParent(c);p&&n.indexOf(p)<0&&n.push(p);for(var u=[],g=c;g!==f&&g!==t.$el.get(0);)u.indexOf(g)<0&&g.children&&g.children.length?(u.push(g),g=g.children[0]):g.nextSibling?g=g.nextSibling:g.parentNode&&(g=g.parentNode,u.push(g)),t.node.isBlock(g)&&u.indexOf(g)<0&&n.indexOf(g)<0&&n.push(g);t.node.isBlock(f)&&n.indexOf(f)<0&&n.push(f);var p=t.node.blockParent(f);p&&n.indexOf(p)<0&&n.push(p)}for(var l=n.length-1;l>0;l--)e(n[l]).find(n).length&&"LI"!=n[l].tagName&&n.splice(l,1);return n}function c(){if(t.$wp){t.markers.remove();for(var e=r(),n=[],o=0;o<e.length;o++)if(e[o].startContainer!==t.document){var i=e[o],a=i.collapsed,l=t.markers.place(i,!0,o),s=t.markers.place(i,!1,o);if(t.browser.safari&&!a){var i=t.document.createRange();i.setStartAfter(l),i.setEndBefore(s),n.push(i)}}if(t.browser.safari&&n.length){t.selection.clear();for(var o=0;o<n.length;o++)t.selection.get().addRange(n[o])}}}function f(){var n=t.$el.find('.fr-marker[data-type="true"]');if(!t.$wp)return n.remove(),!1;if(0===n.length)return!1;t.core.hasFocus()||t.browser.msie||t.$el.focus(),i();for(var r=o(),a=0;a<n.length;a++){var l=e(n[a]).data("id"),s=n[a],d=t.document.createRange(),c=t.$el.find('.fr-marker[data-type="false"][data-id="'+l+'"]'),f=null;if(c.length>0){c=c[0];try{for(var u=!1,g=s.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0==g.textContent.length;){var h=g;g=g.nextSibling,e(h).remove()}for(var m=c.nextSibling;m&&m.nodeType==Node.TEXT_NODE&&0==m.textContent.length;){var h=m;m=m.nextSibling,e(h).remove()}if(s.nextSibling==c||c.nextSibling==s){for(var v=s.nextSibling==c?s:c,E=v==s?c:s,b=v.previousSibling;b&&b.nodeType==Node.TEXT_NODE&&0==b.length;){var h=b;b=b.previousSibling,e(h).remove()}if(b&&b.nodeType==Node.TEXT_NODE)for(;b&&b.previousSibling&&b.previousSibling.nodeType==Node.TEXT_NODE;)b.previousSibling.textContent=b.previousSibling.textContent+b.textContent,
b=b.previousSibling,e(b.nextSibling).remove();for(var S=E.nextSibling;S&&S.nodeType==Node.TEXT_NODE&&0==S.length;){var h=S;S=S.nextSibling,e(h).remove()}if(S&&S.nodeType==Node.TEXT_NODE)for(;S&&S.nextSibling&&S.nextSibling.nodeType==Node.TEXT_NODE;)S.nextSibling.textContent=S.textContent+S.nextSibling.textContent,S=S.nextSibling,e(S.previousSibling).remove();if(b&&t.node.isVoid(b)&&(b=null),S&&t.node.isVoid(S)&&(S=null),b&&S&&b.nodeType==Node.TEXT_NODE&&S.nodeType==Node.TEXT_NODE){e(s).remove(),e(c).remove();var T=b.textContent.length;b.textContent=b.textContent+S.textContent,e(S).remove(),t.html.normalizeSpaces(b),d.setStart(b,T),d.setEnd(b,T),u=!0}else!b&&S&&S.nodeType==Node.TEXT_NODE?(e(s).remove(),e(c).remove(),t.html.normalizeSpaces(S),f=e(t.document.createTextNode("\u200b")),e(S).before(f),d.setStart(S,0),d.setEnd(S,0),u=!0):!S&&b&&b.nodeType==Node.TEXT_NODE&&(e(s).remove(),e(c).remove(),t.html.normalizeSpaces(b),f=e(t.document.createTextNode("\u200b")),e(b).after(f),d.setStart(b,b.textContent.length),d.setEnd(b,b.textContent.length),u=!0)}if(!u){var y,N;t.browser.chrome&&s.nextSibling==c?(y=p(c,d,!0)||d.setStartAfter(c),N=p(s,d,!1)||d.setEndBefore(s)):(s.previousSibling==c&&(s=c,c=s.nextSibling),c.nextSibling&&"BR"===c.nextSibling.tagName||!c.nextSibling&&t.node.isBlock(s.previousSibling)||s.previousSibling&&"BR"==s.previousSibling.tagName||(s.style.display="inline",c.style.display="inline",f=e(t.document.createTextNode("\u200b"))),y=p(s,d,!0)||e(s).before(f)&&d.setStartBefore(s),N=p(c,d,!1)||e(c).after(f)&&d.setEndAfter(c)),"function"==typeof y&&y(),"function"==typeof N&&N()}}catch(C){}}f&&f.remove(),r.addRange(d)}t.markers.remove()}function p(n,o,r){var i=n.previousSibling,a=n.nextSibling;if(i&&a&&i.nodeType==Node.TEXT_NODE&&a.nodeType==Node.TEXT_NODE){var l=i.textContent.length;return r?(a.textContent=i.textContent+a.textContent,e(i).remove(),e(n).remove(),t.html.normalizeSpaces(a),function(){o.setStart(a,l)}):(i.textContent=i.textContent+a.textContent,e(a).remove(),e(n).remove(),t.html.normalizeSpaces(i),function(){o.setEnd(i,l)})}return!1}function u(){return!0}function g(){for(var e=r(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function h(e){var n,o,r=!1,i=!1;if(t.window.getSelection){var a=t.window.getSelection();a.rangeCount&&(n=a.getRangeAt(0),o=n.cloneRange(),o.selectNodeContents(e),o.setEnd(n.startContainer,n.startOffset),r=""===o.toString(),o.selectNodeContents(e),o.setStart(n.endContainer,n.endOffset),i=""===o.toString())}else t.document.selection&&"Control"!=t.document.selection.type&&(n=t.document.selection.createRange(),o=n.duplicate(),o.moveToElementText(e),o.setEndPoint("EndToStart",n),r=""===o.text,o.moveToElementText(e),o.setEndPoint("StartToEnd",n),i=""===o.text);return{atStart:r,atEnd:i}}function m(){if(g())return!1;t.$el.find("td").prepend('<span class="fr-mk">'+e.FroalaEditor.INVISIBLE_SPACE+"</span>"),t.$el.find("img").append('<span class="fr-mk">'+e.FroalaEditor.INVISIBLE_SPACE+"</span>");var n=!1,o=h(t.$el.get(0));return o.atStart&&o.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n}function v(n,o){"undefined"==typeof o&&(o=!0);var r=e(n).html();r&&r.replace(/\u200b/g,"").length!=r.length&&e(n).html(r.replace(/\u200b/g,""));for(var i=t.node.contents(n),a=0;a<i.length;a++)i[a].nodeType!=Node.ELEMENT_NODE?e(i[a]).remove():(v(i[a],0==a),0==a&&(o=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):o&&e(n).attr("data-first",!0)}function E(n,o){var r=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&e(r[0]).hasClass("fr-marker")&&n.attr("data-del-cell",!0);for(var i=0;i<r.length;i++){var a=r[i];e(a).hasClass("fr-marker")?o=(o+1)%2:o?e(a).find(".fr-marker").length>0?o=E(e(a),o):["TD","TH"].indexOf(a.tagName)<0&&!e(a).hasClass("fr-inner")?!t.opts.keepFormatOnDelete||o>1||t.$el.find("[data-first]").length>0?e(a).remove():v(a):e(a).hasClass("fr-inner")?0==e(a).find(".fr-inner").length?e(a).html("<br>"):e(a).find(".fr-inner").filter(function(){return 0==e(this).find("fr-inner").length}).html("<br>"):(e(a).empty(),e(a).attr("data-del-cell",!0)):e(a).find(".fr-marker").length>0&&(o=E(e(a),o))}return o}function b(){try{if(!t.$wp)return!1;for(var e=r(0),n=e.commonAncestorContainer;n&&!t.node.isElement(n);)n=n.parentNode;return t.node.isElement(n)?!0:!1}catch(o){return!1}}function S(){c();for(var n=function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var o=n,n=n.previousSibling;e(o).remove()}return n},o=function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var o=n,n=n.nextSibling;e(o).remove()}return n},r=t.$el.find('.fr-marker[data-type="true"]'),i=0;i<r.length;i++)for(var a=r[i];!n(a)&&!t.node.isBlock(a.parentNode);)e(a.parentNode).before(a);for(var l=t.$el.find('.fr-marker[data-type="false"]'),i=0;i<l.length;i++)for(var s=l[i];!o(s)&&!t.node.isBlock(s.parentNode);)e(s.parentNode).after(s);if(u()){E(t.$el,0);var d=t.$el.find('[data-first="true"]');if(d.length)t.$el.find(".fr-marker").remove(),d.append(e.FroalaEditor.INVISIBLE_SPACE+e.FroalaEditor.MARKERS).removeAttr("data-first"),d.attr("data-text")&&d.replaceWith(d.html());else{t.$el.find("table").filter(function(){var t=e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length;return t}).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell");for(var r=t.$el.find('.fr-marker[data-type="true"]'),i=0;i<r.length;i++){var p=r[i],g=p.nextSibling,h=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(p).data("id")+'"]').get(0);if(h){if(g&&g==h);else if(p){var m=t.node.blockParent(p),v=t.node.blockParent(h);if(e(p).after(h),m==v);else if(null==m){var b=t.node.deepestParent(p);b?(e(b).after(e(v).html()),e(v).remove()):0==e(v).parentsUntil(t.$el,"table").length&&(e(p).next().after(e(v).html()),e(v).remove())}else if(null==v&&0==e(m).parentsUntil(t.$el,"table").length){for(var g=m;!g.nextSibling&&g.parentNode!=t.$el.get(0);)g=g.parentNode;for(g=g.nextSibling;g&&"BR"!=g.tagName;){var S=g.nextSibling;e(m).append(g),g=S}}else 0==e(m).parentsUntil(t.$el,"table").length&&0==e(v).parentsUntil(t.$el,"table").length&&(e(m).append(e(v).html()),e(v).remove())}}else h=e(p).clone().attr("data-type",!1),e(p).after(h)}}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(!0),t.clean.lists(),t.html.normalizeSpaces(),f()}function T(n){if(e(n).find(".fr-marker").length>0)return!1;for(var o=t.node.contents(n);o.length&&t.node.isBlock(o[0]);)n=o[0],o=t.node.contents(n);e(n).prepend(e.FroalaEditor.MARKERS)}function y(n){if(e(n).find(".fr-marker").length>0)return!1;for(var o=t.node.contents(n);o.length&&t.node.isBlock(o[o.length-1]);)n=o[o.length-1],o=t.node.contents(n);e(n).append(e.FroalaEditor.MARKERS)}function N(n){for(var o=n.previousSibling;o&&o.nodeType==Node.TEXT_NODE&&0==o.textContent.length;)o=o.previousSibling;return o?(t.node.isBlock(o)?y(o):"BR"==o.tagName?e(o).before(e.FroalaEditor.MARKERS):e(o).after(e.FroalaEditor.MARKERS),!0):!1}function C(n){for(var o=n.nextSibling;o&&o.nodeType==Node.TEXT_NODE&&0==o.textContent.length;)o=o.nextSibling;return o?(t.node.isBlock(o)?T(o):e(o).before(e.FroalaEditor.MARKERS),!0):!1}return{text:n,get:o,ranges:r,clear:i,element:a,endElement:l,save:c,restore:f,isCollapsed:g,isFull:m,inEditor:b,remove:S,blocks:d,info:h,setAtEnd:y,setAtStart:T,setBefore:N,setAfter:C,rangeElement:s}},e.FroalaEditor.UNICODE_NBSP=String.fromCharCode(160),e.FroalaEditor.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FroalaEditor.BLOCK_TAGS=["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","ul","ol","li","table","td","th","thead","tfoot","tbody","tr","hr"],e.extend(e.FroalaEditor.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script"],htmlSimpleAmpersand:!1}),e.FroalaEditor.MODULES.html=function(t){function n(){return t.opts.enter==e.FroalaEditor.ENTER_P?"p":t.opts.enter==e.FroalaEditor.ENTER_DIV?"div":t.opts.enter==e.FroalaEditor.ENTER_BR?null:void 0}function o(n){"undefined"==typeof n&&(n=!1);var o,a,l=[];if(n)for(o=t.$el.find(i()),a=0;a<o.length;a++){for(var s=t.node.contents(o[a]),d=!1,c=0;c<s.length;c++)if(s[c].nodeType!=Node.COMMENT_NODE&&(s[c].nodeType==Node.ELEMENT_NODE&&e.FroalaEditor.VOID_ELEMENTS.indexOf(s[c].tagName.toLowerCase())>=0||s[c].textContent&&s[c].textContent.replace(/\u200B/g,"").length>0)){d=!0;break}d||0!==e(o[a]).find(i()).length||l.push(o[a])}else for(o=t.$el.find(r()),a=0;a<o.length;a++)0===e(o[a]).find(i()).length&&l.push(o[a]);return e(e.makeArray(l))}function r(){return e.FroalaEditor.BLOCK_TAGS.join(":empty, ")+":empty"}function i(){return e.FroalaEditor.BLOCK_TAGS.join(", ")}function a(){var n=e.merge(["TD","TH"],e.FroalaEditor.VOID_ELEMENTS);n=e.merge(n,t.opts.htmlAllowedEmptyTags);var o,r;do{r=!1,o=t.$el.find("*:empty").not(n.join(", ")+", .fr-marker");for(var i=0;i<o.length;i++)0===o[i].attributes.length&&(e(o[i]).remove(),r=!0);o=t.$el.find("*:empty").not(n.join(", ")+", .fr-marker")}while(o.length&&r)}function l(o,r){var i=n();if(r&&(i='div class="fr-temp-div"'),i)for(var a=t.node.contents(o.get(0)),l=null,s=0;s<a.length;s++){var d=a[s];if(d.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(d))l=null;else if(d.nodeType!=Node.ELEMENT_NODE&&d.nodeType!=Node.TEXT_NODE)l=null;else if(d.nodeType==Node.ELEMENT_NODE&&"BR"==d.tagName)if(null==l)r?e(d).replaceWith("<"+i+' data-empty="true"><br></div>'):e(d).replaceWith("<"+i+"><br></"+i+">");else{e(d).remove();for(var c=t.node.contents(l),f=!1,p=0;p<c.length;p++)if(!e(c[p]).hasClass("fr-marker")&&(c[p].nodeType!=Node.TEXT_NODE||0!==c[p].textContent.replace(/ /g,"").length)){f=!0;break}f===!1&&(l.append("<br>"),l.data("empty",!0)),l=null}else d.nodeType==Node.TEXT_NODE&&0==e(d).text().trim().length?e(d).remove():(null==l&&(l=e("<"+i+">"),e(d).before(l)),d.nodeType==Node.TEXT_NODE&&e(d).text().trim().length>0?(l.append(e(d).clone()),e(d).remove()):l.append(e(d)))}}function s(n,o,r){return t.$wp?("undefined"==typeof n&&(n=!1),"undefined"==typeof o&&(o=!1),"undefined"==typeof r&&(r=!1),l(t.$el,n),t.$el.find(".fr-inner").each(function(){l(e(this),n)}),o&&t.$el.find("td, th").each(function(){l(e(this),n)}),void(r&&t.$el.find("blockquote").each(function(){l(e(this),n)}))):!1}function d(){t.$el.find("div.fr-temp-div").each(function(){e(this).data("empty")||"LI"==this.parentNode.tagName?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")}),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""==e(this).attr("class")}).removeAttr("class")}function c(e){o(e).not("hr").append("<br/>")}function f(){return t.$el.find(i())}function p(e){"undefined"==typeof e&&(e=t.$el.get(0));for(var n=t.node.contents(e),o=n.length-1;o>=0;o--)if(n[o].nodeType==Node.TEXT_NODE&&t.node.isBlock(e)){for(var r=-1;r!=n[o].textContent.length;)r=n[o].textContent.length,n[o].textContent=n[o].textContent.replace(/(?!^)  (?!$)/g," ");n[o].textContent=n[o].textContent.replace(/^  /g," "),n[o].textContent=n[o].textContent.replace(/  $/g," "),t.node.isBlock(e)&&(n[o].previousSibling||(n[o].textContent=n[o].textContent.replace(/^ */,"")),n[o].nextSibling||(n[o].textContent=n[o].textContent.replace(/ *$/,"")))}else p(n[o])}function u(e){return e&&(t.node.isBlock(e)||["STYLE","SCRIPT","HEAD","BR","HR"].indexOf(e.tagName)>=0||e.nodeType==Node.COMMENT_NODE)}function g(n){if("undefined"==typeof n&&(n=t.$el.get(0)),n.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","HEAD"].indexOf(n.tagName)<0)for(var o=t.node.contents(n),r=o.length-1;r>=0;r--)e(o[r]).hasClass("fr-marker")||g(o[r]);else if(n.nodeType==Node.TEXT_NODE&&n.textContent.length>0){var i=n.previousSibling,a=n.nextSibling;if(u(i)&&u(a)&&0===n.textContent.trim().length)e(n).remove();else{var l=n.textContent;l=l.replace(new RegExp(e.FroalaEditor.UNICODE_NBSP,"g")," ");for(var s="",d=0;d<l.length;d++)s+=32!=l.charCodeAt(d)||0!==d&&32!=s.charCodeAt(d-1)?l[d]:e.FroalaEditor.UNICODE_NBSP;n.nextSibling||(s=s.replace(/ $/,e.FroalaEditor.UNICODE_NBSP)),n.previousSibling&&!t.node.isVoid(n.previousSibling)&&(s=s.replace(/^\u00A0([^ $])/," $1")),s=s.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=s&&(n.textContent=s)}}}function h(e,t,n){var o=new RegExp(t,"gi"),r=o.exec(e);return r?r[n]:null}function m(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function v(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function E(){s(),p(),a(),g(),c(!0),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.clean.quotes(),t.placeholder.refresh(),t.selection.restore(),b()}function b(){t.core.isEmpty()&&(null!=n()?0===t.$el.find(i()).length&&(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FroalaEditor.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):0===t.$el.find("*:not(.fr-marker):not(br)").length&&(t.core.hasFocus()?(t.$el.html(e.FroalaEditor.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function S(e,t){return h(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function T(n,o){var r=e("<div "+(h(n,"<"+o+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(r.get(0))}function y(e){return h(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function N(e){var n=t.clean.html(e,[],[],t.opts.fullPage);if(n=n.replace(/\r|\n/g,""),t.opts.fullPage){var o=(S(n,"body")||n).replace(/\r|\n/g,""),r=T(n,"body"),i=S(n,"head")||"<title></title>",a=T(n,"head"),l=y(n),s=T(n,"html");t.$el.html(o),t.node.clearAttributes(t.$el.get(0)),t.$el.attr(r),t.$head.html(i),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(a),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(s),t.iframe_document.doctype.parentNode.replaceChild(m(l,t.iframe_document),t.iframe_document.doctype)}else t.$el.html(n);t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),E(),t.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),t.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")}),t.events.trigger("html.set")}function C(e,n){var o="";t.events.trigger("html.beforeGet");var r,i=[];if(!t.opts.useClasses&&!n){for(r=0;r<t.document.styleSheets.length;r++){var a;try{a=t.document.styleSheets[r].cssRules}catch(l){}if(a)for(var s=0,d=a.length;d>s;s++){var c=t.opts.iframe?"body ":".fr-view ";if(a[s].selectorText&&0===a[s].selectorText.indexOf(c)&&a[s].style.cssText.length>0)for(var f=a[s].selectorText.replace(c,"").replace(/::/g,":"),p=t.$el.get(0).querySelectorAll(f),u=0;u<p.length;u++)!p[u].getAttribute("fr-original-style")&&p[u].getAttribute("style")&&(p[u].setAttribute("fr-original-style",p[u].getAttribute("style")),i.push(p[u])),p[u].style.cssText+=a[s].style.cssText}}for(r=0;r<i.length;r++)i[r].getAttribute("class")&&(i[r].setAttribute("fr-original-class",i[r].getAttribute("class")),i[r].removeAttribute("class"))}if(t.core.isEmpty()?t.opts.fullPage&&(o=v(t.iframe_document),o+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>"):("undefined"==typeof e&&(e=!1),t.opts.fullPage?(o=v(t.iframe_document),o+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>"):o=t.$el.html()),!t.opts.useClasses&&!n)for(r=0;r<i.length;r++)i[r].getAttribute("fr-original-class")&&(i[r].setAttribute("class",i[r].getAttribute("fr-original-class")),i[r].removeAttribute("fr-original-class")),i[r].setAttribute("style",i[r].getAttribute("fr-original-style")),i[r].removeAttribute("fr-original-style");o=o.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")}),t.opts.fullPage&&(o=o.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),o=o.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),o=o.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),o=o.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),o=o.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),o=o.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),o=o.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(o=o.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(o=o.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),o=t.clean.invisibleSpaces(o);var g=t.events.chainTrigger("html.get",o);return"string"==typeof g&&(o=g),o}function x(){var n=function(n,o){for(;o&&(o.nodeType==Node.TEXT_NODE||!t.node.isBlock(o));)o&&o.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(o)+t.node.closeTagString(o)),o=o.parentNode;o&&n.innerHTML==o.innerHTML&&(n.innerHTML=o.outerHTML)},o=function(){var n,o=null;return t.window.getSelection?(n=t.window.getSelection(),n&&n.rangeCount&&(o=n.getRangeAt(0).commonAncestorContainer,o.nodeType!=Node.ELEMENT_NODE&&(o=o.parentNode))):(n=t.document.selection)&&"Control"!=n.type&&(o=n.createRange().parentElement()),null!=o&&(e.inArray(t.$el.get(0),e(o).parents())>=0||o==t.$el.get(0))?o:null},r="";if("undefined"!=typeof t.window.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var i=t.selection.ranges(),a=0;a<i.length;a++){var l=document.createElement("div");l.appendChild(i[a].cloneContents()),n(l,o()),r+=l.innerHTML}}else"undefined"!=typeof t.document.selection&&"Text"==t.document.selection.type&&(r=t.document.selection.createRange().htmlText);return r}function w(t){var n=e("<div>").html(t);return n.find(i()).length>0}function $(e){var n=t.document.createElement("div");return n.innerHTML=e,t.selection.setAtEnd(n),n.innerHTML}function A(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&apos;")}function O(n,o){""!==t.selection.text()&&t.selection.remove();var r;if(r=o?n:t.clean.html(n),n.indexOf('class="fr-marker"')<0&&(r=$(r)),t.core.isEmpty())t.$el.html(r);else{t.markers.insert();var i,a=t.$el.find(".fr-marker").get(0);if(w(r)&&(i=t.node.deepestParent(a)))if(t.node.isBlock(i)&&t.node.isEmpty(i))e(i).replaceWith(r);else{var l=a,s="",d="";do l=l.parentNode,s+=t.node.closeTagString(l),d=t.node.openTagString(l)+d;while(l!=i);e(a).replaceWith('<span id="fr-break"></span>');var c=t.node.openTagString(i)+e(i).html()+t.node.closeTagString(i);c=c.replace(/<span id="fr-break"><\/span>/g,s+r+d),e(i).replaceWith(c)}else e(a).replaceWith(r)}E(),t.events.trigger("html.inserted")}function k(n){var o=null;"undefined"==typeof n&&(o=t.selection.element());var r,i;do{i=!1,r=t.$el.find("*").not(o).not(".fr-marker");for(var a=0;a<r.length;a++){var l=r.get(a),s=l.textContent;0===e(l).find("*").length&&1===s.length&&8203==s.charCodeAt(0)&&(e(l).remove(),i=!0)}}while(i)}function _(){var e=function(){k(),t.placeholder&&t.placeholder.refresh()};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",b)}return{defaultTag:n,emptyBlocks:o,emptyBlockTagsQuery:r,blockTagsQuery:i,fillEmptyBlocks:c,cleanEmptyTags:a,cleanWhiteTags:k,normalizeSpaces:g,cleanBlankSpaces:p,blocks:f,getDoctype:v,set:N,get:C,getSelected:x,insert:O,wrap:s,unwrap:d,escapeEntities:A,checkIfEmpty:b,extractNode:S,extractNodeAttrs:T,extractDoctype:y,_init:_}},e.extend(e.FroalaEditor.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FroalaEditor.MODULES.size=function(e){function t(){e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.height&&(e.$wp.height(e.opts.height),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom")))),e.opts.heightMin&&e.$el.css("minHeight",e.opts.heightMin),e.opts.heightMax&&e.$wp.css("maxHeight",e.opts.heightMax),e.opts.width&&e.$box.width(e.opts.width)}function o(){return e.$wp?(n(),void(e.opts.iframe&&(e.events.on("keyup",t),e.events.on("commands.after",t),e.events.on("html.set",t),e.events.on("init",t),e.events.on("initialized",t)))):!1}return{_init:o,syncIframe:t,refresh:n}},e.extend(e.FroalaEditor.DEFAULTS,{language:null}),e.FroalaEditor.LANGUAGE={},e.FroalaEditor.MODULES.language=function(t){function n(e){return r&&r.translation[e]?r.translation[e]:e}function o(){e.FroalaEditor.LANGUAGE&&(r=e.FroalaEditor.LANGUAGE[t.opts.language]),r&&r.direction&&(t.opts.direction=r.direction)}var r;return{_init:o,translate:n}},e.extend(e.FroalaEditor.DEFAULTS,{placeholderText:"Type something",placeholderFontFamily:"Arial, Helvetica, sans-serif"}),e.FroalaEditor.MODULES.placeholder=function(t){function n(){var n=0,o=t.node.contents(t.$el.get(0));o.length&&o[0].nodeType==Node.ELEMENT_NODE?(n=t.helpers.getPX(e(o[0]).css("margin-top")),t.$placeholder.css("font-size",e(o[0]).css("font-size")),t.$placeholder.css("line-height",e(o[0]).css("line-height"))):(t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"))),t.$wp.addClass("show-placeholder"),t.$placeholder.css("margin-top",n).text(t.language.translate(t.opts.placeholderText||t.$original_element.attr("placeholder")||""))}function o(){t.$wp.removeClass("show-placeholder")}function r(){return t.$wp.hasClass("show-placeholder")}function i(){return t.$wp?void(t.core.isEmpty()?n():o()):!1}function a(){return t.$wp?(t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder),t.events.on("init",i),t.events.on("input",i),t.events.on("keydown",i),t.events.on("keyup",i),void t.events.on("contentChanged",i)):!1}return{_init:a,show:n,hide:o,refresh:i,isVisible:r}},e.FroalaEditor.MODULES.edit=function(e){function t(){e.browser.mozilla&&(e.document.execCommand("enableObjectResizing",!1,"false"),e.document.execCommand("enableInlineTableEditing",!1,"false"))}function n(){e.$wp&&(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled"),e.$tb&&e.$tb.removeClass("fr-disabled"),t()),i=!1}function o(){e.$wp&&(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled"),e.$tb.addClass("fr-disabled")),i=!0}function r(){return i}var i=!1;return{on:n,off:o,disableDesign:t,isDisabled:r}},e.extend(e.FroalaEditor.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin: 0px;}body{padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px}body:after{content:"";clear:both;display:block}',direction:"auto",zIndex:1,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1}),e.FroalaEditor.MODULES.core=function(t){function n(e){t.opts.iframe&&t.$head.append('<style data-fr-style="true">'+e+"</style>")}function o(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function r(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),o(),t.opts.iframe){t.$iframe.addClass("fr-iframe");for(var e=0;e<t.original_document.styleSheets.length;e++){var n;try{n=t.original_document.styleSheets[e].cssRules}catch(r){}if(n)for(var i=0,a=n.length;a>i;i++)n[i].selectorText&&0===n[i].selectorText.indexOf(".fr-view")&&n[i].style.cssText.length>0&&(t.opts.iframeStyle+=n[i].selectorText.replace(/\.fr-view/g,"body")+"{"+n[i].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.$box&&t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")}function i(){return t.node.isEmpty(t.$el.get(0))}function a(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.window.FormData,progress:"upload"in new XMLHttpRequest}}function l(e,n){var o=new XMLHttpRequest;o.open(n,e,!0),t.opts.requestWithCORS&&(o.withCredentials=!0);for(var r in t.opts.requestHeaders)o.setRequestHeader(r,t.opts.requestHeaders[r]);return o}function s(){"TEXTAREA"==t.$original_element.get(0).tagName&&t.$original_element.val(t.html.get()),t.$wp&&("TEXTAREA"==t.$original_element.get(0).tagName?(t.$box.replaceWith(t.$original_element),t.$original_element.show()):(t.$el.off("contextmenu.rightClick"),t.$wp.replaceWith(t.html.get()),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")))}function d(){return t.node.hasFocus(t.$el.get(0))}function c(){if(e.FroalaEditor.INSTANCES.push(t),a(),t.$wp){r(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.$el.on("contextmenu.rightClick",function(e){return 2==e.button?!1:void 0});try{t.document.execCommand("styleWithCSS",!1,!1)}catch(n){}}t.events.trigger("init"),t.events.on("destroy",s),"TEXTAREA"==t.$original_element.get(0).tagName&&(t.events.on("contentChanged",function(){t.$original_element.val(t.html.get())}),t.events.on("form.submit",function(){t.$original_element.val(t.html.get())}),t.$original_element.val(t.html.get()))}return{_init:c,isEmpty:i,getXHR:l,injectStyle:n,hasFocus:d}},e.FroalaEditor.COMMANDS={bold:{title:"Bold"},italic:{title:"Italic"},underline:{title:"Underline"},strikeThrough:{title:"Strikethrough"},subscript:{title:"Subscript"},superscript:{title:"Superscript"},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FroalaEditor.RegisterCommand=function(t,n){e.FroalaEditor.COMMANDS[t]=n},e.FroalaEditor.MODULES.commands=function(t){function n(n,o){if(t.events.trigger("commands.before",e.merge([n],o||[]))!==!1){var r=e.FroalaEditor.COMMANDS[n]&&e.FroalaEditor.COMMANDS[n].callback||c[n],i=!0;e.FroalaEditor.COMMANDS[n]&&"undefined"!=typeof e.FroalaEditor.COMMANDS[n].focus&&(i=e.FroalaEditor.COMMANDS[n].focus),t.core.hasFocus()||!i||t.popups.areVisible()||t.events.focus(!0),e.FroalaEditor.COMMANDS[n]&&e.FroalaEditor.COMMANDS[n].undo!==!1&&t.undo.saveStep(),r&&r.apply(t,e.merge([n],o||[])),t.events.trigger("commands.after",e.merge([n],o||[])),e.FroalaEditor.COMMANDS[n]&&e.FroalaEditor.COMMANDS[n].undo!==!1&&t.undo.saveStep()}}function o(n,o){if(t.selection.isCollapsed()&&t.document.queryCommandState(n)===!1){t.markers.insert();var r=t.$el.find(".fr-marker");r.replaceWith("<"+o+">"+e.FroalaEditor.INVISIBLE_SPACE+e.FroalaEditor.MARKERS+"</"+o+">"),t.selection.restore()}else{var i=t.selection.element();if(t.selection.isCollapsed()&&t.document.queryCommandState(n)===!0&&i.tagName==o.toUpperCase()&&0===(i.textContent||"").replace(/\u200B/g,"").length)e(i).replaceWith(e.FroalaEditor.MARKERS),t.selection.restore();else{var a=t.$el.find("span"),l=!1;t.document.queryCommandState(n)===!1&&(t.selection.save(),l=!0),t.document.execCommand(n,!1,!1),l&&t.selection.restore();var s=t.$el.find("span[style]").not(a).filter(function(){return e(this).attr("style").indexOf("font-weight: normal")>=0});s.length&&(t.selection.save(),s.each(function(){e(this).replaceWith(e(this).html())}),t.selection.restore()),t.clean.toHTML5()}}}function r(n){t.selection.save(),t.html.wrap(!0,!0),t.selection.restore();for(var o=t.selection.blocks(),r=0;r<o.length;r++)if("LI"!=o[r].tagName&&"LI"!=o[r].parentNode.tagName){var i=e(o[r]),a="rtl"==t.opts.direction||"rtl"==i.css("direction")?"margin-right":"margin-left",l=t.helpers.getPX(i.css(a));i.css(a,Math.max(l+20*n,0)||""),i.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function i(){var n=function(e){return e.attr("style").indexOf("font-size")>=0};t.$el.find("[style]").each(function(){var t=e(this);n(t)&&(t.attr("data-font-size",t.css("font-size")),t.css("font-size",""))})}function a(){t.$el.find("[data-font-size]").each(function(){var t=e(this);t.css("font-size",t.attr("data-font-size")),t.removeAttr("data-font-size")})}function l(){t.$el.find("span").each(function(){""===t.node.attributes(this)&&e(this).replaceWith(e(this).html())})}function s(n,o){if(t.selection.isCollapsed()){t.markers.insert();var r=t.$el.find(".fr-marker");r.replaceWith('<span style="'+n+": "+o+';">'+e.FroalaEditor.INVISIBLE_SPACE+e.FroalaEditor.MARKERS+"</span>"),t.selection.restore()}else{i(),t.document.execCommand("fontSize",!1,4),t.selection.save(),a();for(var s,d=function(t){var o=e(t);o.css(n,""),""===o.attr("style")&&o.replaceWith(o.html())},c=function(){return 0===e(this).attr("style").indexOf(n+":")||e(this).attr("style").indexOf(";"+n+":")>=0||e(this).attr("style").indexOf("; "+n+":")>=0};t.$el.find("font").length>0;){var f=t.$el.find("font:first"),p=e('<span class="fr-just" style="'+n+": "+o+';">'+f.html()+"</span>");f.replaceWith(p);var u=p.find("span");for(s=u.length-1;s>=0;s--)d(u[s]);var g=p.parentsUntil(t.$el,"span:first").filter(c);if(g.length){var h="",m="",v="",E="",b=p.get(0);do b=b.parentNode,h+=t.node.closeTagString(b),m=t.node.openTagString(b)+m,g.get(0)!=b&&(v+=t.node.closeTagString(b),E=t.node.openTagString(b)+E);while(g.get(0)!=b);var S=h+'<span class="fr-just" style="'+n+": "+o+';">'+E+p.html()+v+"</span>"+m;p.replaceWith('<span id="fr-break"></span>');var T=g.get(0).outerHTML;g.replaceWith(T.replace(/<span id="fr-break"><\/span>/g,S))}}t.html.cleanEmptyTags(),l();var y=t.$el.find(".fr-just + .fr-just");for(s=0;s<y.length;s++){var N=e(y[s]);N.prepend(N.prev().html()),N.prev().remove()}t.$el.find(".fr-marker + .fr-just").each(function(){e(this).prepend(e(this).prev())}),t.$el.find(".fr-just + .fr-marker").each(function(){e(this).append(e(this).next())}),t.$el.find(".fr-just").removeAttr("class"),t.selection.restore()}}function d(e){return function(){n(e)}}var c={bold:function(){o("bold","strong")},subscript:function(){o("subscript","sub")},superscript:function(){o("superscript","sup")},italic:function(){o("italic","em")},strikeThrough:function(){o("strikeThrough","s")},underline:function(){o("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){r(1)},outdent:function(){r(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove(),t.html.insert('<hr id="fr-just">');var e=t.$el.find("hr#fr-just");e.removeAttr("id"),t.selection.setAfter(e.get(0))||t.selection.setBefore(e.get(0)),t.selection.restore()},clearFormatting:function(){t.document.execCommand("removeFormat",!1,!1),t.document.execCommand("unlink",!1,!1)},selectAll:function(){t.document.execCommand("selectAll",!1,!1)}},f={};for(var p in c)f[p]=d(p);return e.extend(f,{exec:n,applyProperty:s})},e.FroalaEditor.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function o(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}function r(r){var i,a=n(r),l=a.nextSibling,s=a.previousSibling,d=t.html.defaultTag();if(t.node.isEmpty(a,!0)&&l){for(var c="",f="",p=r.parentNode;!t.node.isList(p)&&p.parentNode&&"LI"!==p.parentNode.tagName;)c=t.node.openTagString(p)+c,f+=t.node.closeTagString(p),p=p.parentNode;c=t.node.openTagString(p)+c,f+=t.node.closeTagString(p);var u="";for(u=p.parentNode&&"LI"==p.parentNode.tagName?f+"<li>"+e.FroalaEditor.MARKERS+"<br>"+c:d?f+"<"+d+">"+e.FroalaEditor.MARKERS+"<br></"+d+">"+c:f+e.FroalaEditor.MARKERS+"<br>"+c,e(a).html('<span id="fr-break"></span>');["UL","OL"].indexOf(p.tagName)<0||p.parentNode&&"LI"===p.parentNode.tagName;)p=p.parentNode;var g=t.node.openTagString(p)+e(p).html()+t.node.closeTagString(p);g=g.replace(/<span id="fr-break"><\/span>/g,u),e(p).replaceWith(g),
t.$el.find("li:empty").remove()}else s&&l||!t.node.isEmpty(a,!0)?(e(a).before("<li><br></li>"),e(r).remove()):s?(i=o(a),i.parentNode&&"LI"==i.parentNode.tagName?e(i.parentNode).after("<li>"+e.FroalaEditor.MARKERS+"<br></li>"):d?e(i).after("<"+d+">"+e.FroalaEditor.MARKERS+"<br></"+d+">"):e(i).after(e.FroalaEditor.MARKERS+"<br>"),e(a).remove()):(i=o(a),i.parentNode&&"LI"==i.parentNode.tagName?e(i.parentNode).before("<li>"+e.FroalaEditor.MARKERS+"<br></li>"):d?e(i).before("<"+d+">"+e.FroalaEditor.MARKERS+"<br></"+d+">"):e(i).before(e.FroalaEditor.MARKERS+"<br>"),e(a).remove())}function i(o){for(var r=n(o),i="",a=o,l="",s="";a!=r;){a=a.parentNode;var d="A"==a.tagName&&t.cursor.isAtEnd(o,a)?"fr-to-remove":"";l=t.node.openTagString(e(a).clone().addClass(d).get(0))+l,s=t.node.closeTagString(a)+s}i=s+i+l+e.FroalaEditor.MARKERS,e(o).replaceWith('<span id="fr-break"></span>');var c=t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r);c=c.replace(/<span id="fr-break"><\/span>/g,i),e(r).replaceWith(c)}function a(o){for(var r=n(o),i=e.FroalaEditor.MARKERS,a=o;a!=r;){a=a.parentNode;var l="A"==a.tagName&&t.cursor.isAtEnd(o,a)?"fr-to-remove":"";i=t.node.openTagString(e(a).clone().addClass(l).get(0))+i+t.node.closeTagString(a)}e(o).remove(),e(r).after(i)}function l(r){var i=n(r),a=i.previousSibling;if(a){a=e(a).find(t.html.blockTagsQuery()).get(-1)||a,e(r).replaceWith(e.FroalaEditor.MARKERS);var l=t.node.contents(a);l.length&&"BR"==l[l.length-1].tagName&&e(l[l.length-1]).remove(),e(i).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==i&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var s,d=t.node.contents(i)[0];d&&!t.node.isList(d);)s=d.nextSibling,e(a).append(d),d=s;for(a=i.previousSibling;d;)s=d.nextSibling,e(a).append(d),d=s;e(i).remove()}else{var c=o(i);if(e(r).replaceWith(e.FroalaEditor.MARKERS),c.parentNode&&"LI"==c.parentNode.tagName){var f=c.previousSibling;t.node.isBlock(f)?(e(i).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==i&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(f).append(e(i).html())):e(c).before(e(i).html())}else{var p=t.html.defaultTag();p&&0===e(i).find(t.html.blockTagsQuery()).length?e(c).before("<"+p+">"+e(i).html()+"</"+p+">"):e(c).before(e(i).html())}e(i).remove(),0===e(c).find("li").length&&e(c).remove()}}function s(o){var r,i=n(o),a=i.nextSibling;if(a){r=t.node.contents(a),r.length&&"BR"==r[0].tagName&&e(r[0]).remove(),e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var l,s=o,d=t.node.contents(a)[0];d&&!t.node.isList(d);)l=d.nextSibling,e(s).after(d),s=d,d=l;for(;d;)l=d.nextSibling,e(i).append(d),d=l;e(o).replaceWith(e.FroalaEditor.MARKERS),e(a).remove()}else{for(var c=i;!c.nextSibling&&c!=t.$el.get(0);)c=c.parentNode;if(c==t.$el.get(0))return!1;if(c=c.nextSibling,t.node.isBlock(c))e.FroalaEditor.NO_DELETE_TAGS.indexOf(c.tagName)<0&&(e(o).replaceWith(e.FroalaEditor.MARKERS),r=t.node.contents(i),r.length&&"BR"==r[r.length-1].tagName&&e(r[r.length-1]).remove(),e(i).append(e(c).html()),e(c).remove());else for(r=t.node.contents(i),r.length&&"BR"==r[r.length-1].tagName&&e(r[r.length-1]).remove(),e(o).replaceWith(e.FroalaEditor.MARKERS);c&&!t.node.isBlock(c)&&"BR"!=c.tagName;)e(i).append(e(c)),c=c.nextSibling}}return{_startEnter:r,_middleEnter:i,_endEnter:a,_backspace:l,_del:s}},e.FroalaEditor.NO_DELETE_TAGS=["TH","TD","TABLE"],e.FroalaEditor.SIMPLE_ENTER_TAGS=["TH","TD","LI"],e.FroalaEditor.MODULES.cursor=function(t){function n(e){return t.node.isBlock(e)?!0:e.nextSibling?!1:n(e.parentNode)}function o(e){return t.node.isBlock(e)?!0:e.previousSibling?!1:o(e.parentNode)}function r(e,n){return e?e==t.$wp.get(0)?!1:e.previousSibling?!1:e.parentNode==n?!0:r(e.parentNode,n):!1}function i(e,n){return e?e==t.$wp.get(0)?!1:e.nextSibling?!1:e.parentNode==n?!0:i(e.parentNode,n):!1}function a(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function l(n){var o=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,r=t.node.deepestParent(n,[],!o);if(r&&"BLOCKQUOTE"==r.tagName){var i=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);i&&i.previousSibling&&(r=i)}if(null!==r){var a,l=r.previousSibling;if(t.node.isBlock(r)&&t.node.isEditable(r)&&l&&e.FroalaEditor.NO_DELETE_TAGS.indexOf(l.tagName)<0&&t.node.isEditable(l))if(t.node.isBlock(l))if(t.node.isEmpty(l)&&!t.node.isList(l))e(l).remove();else{if(t.node.isList(l)&&(l=e(l).find("li:last").get(0)),a=t.node.contents(l),a.length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),"BLOCKQUOTE"==l.tagName&&"BLOCKQUOTE"!=r.tagName)for(a=t.node.contents(l);a.length&&t.node.isBlock(a[a.length-1]);)l=a[a.length-1],a=t.node.contents(l);else if("BLOCKQUOTE"!=l.tagName&&"BLOCKQUOTE"==r.tagName)for(a=t.node.contents(r);a.length&&t.node.isBlock(a[0]);)r=a[0],a=t.node.contents(r);e(n).replaceWith(e.FroalaEditor.MARKERS),e(l).append(r.innerHTML),e(r).remove()}else e(n).replaceWith(e.FroalaEditor.MARKERS),"BLOCKQUOTE"==r.tagName&&l.nodeType==Node.ELEMENT_NODE?e(l).remove():(e(l).after(t.node.isEmpty(r)?"":e(r).html()),e(r).remove(),"BR"==l.tagName&&e(l).remove())}}function s(n){for(var o=n;!o.previousSibling;)o=o.parentNode;o=o.previousSibling;var r;if(t.node.isBlock(o)){if(e.FroalaEditor.NO_DELETE_TAGS.indexOf(o.tagName)<0)if(t.node.isEmpty(o)&&!t.node.isList(o))e(o).remove(),e(n).replaceWith(e.FroalaEditor.MARKERS);else{for(t.node.isList(o)&&(o=e(o).find("li:last").get(0)),r=t.node.contents(o),r&&"BR"==r[r.length-1].tagName&&e(r[r.length-1]).remove(),r=t.node.contents(o);r&&t.node.isBlock(r[r.length-1]);)o=r[r.length-1],r=t.node.contents(o);e(o).append(e.FroalaEditor.MARKERS);for(var i=n;!i.previousSibling;)i=i.parentNode;for(;i&&"BR"!==i.tagName&&!t.node.isBlock(i);){var a=i;i=i.nextSibling,e(o).append(a)}i&&"BR"==i.tagName&&e(i).remove(),e(n).remove()}}else{for(r=t.node.contents(o);o.nodeType!=Node.TEXT_NODE&&r.length&&!e(o).is("[contenteditable='false']");)o=r[r.length-1],r=t.node.contents(o);if(o.nodeType==Node.TEXT_NODE){if(t.helpers.isIOS())return!0;e(o).after(e.FroalaEditor.MARKERS);var l=o.textContent,s=l.length-1;if(t.opts.tabSpaces&&l.length>=t.opts.tabSpaces){var d=l.substr(l.length-t.opts.tabSpaces,l.length-1);0==d.replace(/ /g,"").replace(new RegExp(e.FroalaEditor.UNICODE_NBSP,"g"),"").length&&(s=l.length-t.opts.tabSpaces)}o.textContent=l.substring(0,s),o.textContent.length&&55357==o.textContent.charCodeAt(o.textContent.length-1)&&(o.textContent=o.textContent.substr(0,o.textContent.length-1))}else t.events.trigger("node.remove",[e(o)])!==!1&&(e(o).after(e.FroalaEditor.MARKERS),e(o).remove())}}function d(){var i=!1,d=t.markers.insert();if(!d)return!1;t.$el.get(0).normalize();var c=d.previousSibling;if(c){var f=c.textContent;f&&f.length&&8203==f.charCodeAt(f.length-1)&&(1==f.length?e(c).remove():(c.textContent=c.textContent.substr(0,f.length-1),c.textContent.length&&55357==c.textContent.charCodeAt(c.textContent.length-1)&&(c.textContent=c.textContent.substr(0,c.textContent.length-1))))}return n(d)?i=s(d):o(d)?a(d)&&r(d,e(d).parents("li:first").get(0))?t.cursorLists._backspace(d):l(d):i=s(d),e(d).remove(),t.$el.find("blockquote:empty").remove(),t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(!0),t.clean.quotes(),t.clean.lists(),t.html.normalizeSpaces(),t.selection.restore(),i}function c(n){var o=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,r=t.node.deepestParent(n,[],!o);if(r&&"BLOCKQUOTE"==r.tagName){var i=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);i&&i.nextSibling&&(r=i)}if(null!==r){var a,l=r.nextSibling;if(t.node.isBlock(r)&&t.node.isEditable(r)&&l&&e.FroalaEditor.NO_DELETE_TAGS.indexOf(l.tagName)<0)if(t.node.isBlock(l)&&t.node.isEditable(l))if(t.node.isList(l))if(t.node.isEmpty(r,!0))e(r).remove(),e(l).find("li:first").prepend(e.FroalaEditor.MARKERS);else{var s=e(l).find("li:first");"BLOCKQUOTE"==r.tagName&&(a=t.node.contents(r),a.length&&t.node.isBlock(a[a.length-1])&&(r=a[a.length-1])),0===s.find("ul, ol").length&&(e(n).replaceWith(e.FroalaEditor.MARKERS),s.find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==s.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(r).append(t.node.contents(s.get(0))),s.remove(),0===e(l).find("li").length&&e(l).remove())}else{if(a=t.node.contents(l),a.length&&"BR"==a[0].tagName&&e(a[0]).remove(),"BLOCKQUOTE"!=l.tagName&&"BLOCKQUOTE"==r.tagName)for(a=t.node.contents(r);a.length&&t.node.isBlock(a[a.length-1]);)r=a[a.length-1],a=t.node.contents(r);else if("BLOCKQUOTE"==l.tagName&&"BLOCKQUOTE"!=r.tagName)for(a=t.node.contents(l);a.length&&t.node.isBlock(a[0]);)l=a[0],a=t.node.contents(l);e(n).replaceWith(e.FroalaEditor.MARKERS),e(r).append(l.innerHTML),e(l).remove()}else{for(e(n).replaceWith(e.FroalaEditor.MARKERS);l&&"BR"!==l.tagName&&!t.node.isBlock(l)&&t.node.isEditable(l);){var d=l;l=l.nextSibling,e(r).append(d)}l&&"BR"==l.tagName&&t.node.isEditable(l)&&e(l).remove()}}}function f(o){for(var r=o;!r.nextSibling;)r=r.parentNode;if(r=r.nextSibling,"BR"==r.tagName&&t.node.isEditable(r))if(r.nextSibling){if(t.node.isBlock(r.nextSibling)&&t.node.isEditable(r.nextSibling)){if(!(e.FroalaEditor.NO_DELETE_TAGS.indexOf(r.nextSibling.tagName)<0))return;r=r.nextSibling,e(r.previousSibling).remove()}}else if(n(r)){if(a(o))t.cursorLists._del(o);else{var i=t.node.deepestParent(r);i&&(e(r).remove(),c(o))}return}var l;if(!t.node.isBlock(r)&&t.node.isEditable(r)){for(l=t.node.contents(r);r.nodeType!=Node.TEXT_NODE&&l.length&&t.node.isEditable(r);)r=l[0],l=t.node.contents(r);r.nodeType==Node.TEXT_NODE?(e(r).before(e.FroalaEditor.MARKERS),r.textContent.length&&55357==r.textContent.charCodeAt(0)?r.textContent=r.textContent.substring(2,r.textContent.length):r.textContent=r.textContent.substring(1,r.textContent.length)):t.events.trigger("node.remove",[e(r)])!==!1&&(e(r).before(e.FroalaEditor.MARKERS),e(r).remove()),e(o).remove()}else if(e.FroalaEditor.NO_DELETE_TAGS.indexOf(r.tagName)<0)if(t.node.isList(r))o.previousSibling?(e(r).find("li:first").prepend(o),t.cursorLists._backspace(o)):(e(r).find("li:first").prepend(e.FroalaEditor.MARKERS),e(o).remove());else if(l=t.node.contents(r),l&&"BR"==l[0].tagName&&e(l[0]).remove(),l&&"BLOCKQUOTE"==r.tagName){var s=l[0];for(e(o).before(e.FroalaEditor.MARKERS);s&&"BR"!=s.tagName;){var d=s;s=s.nextSibling,e(o).before(d)}s&&"BR"==s.tagName&&e(s).remove()}else e(o).after(e(r).html()).after(e.FroalaEditor.MARKERS),e(r).remove()}function p(){var r=t.markers.insert();if(!r)return!1;if(t.$el.get(0).normalize(),n(r))if(a(r))if(0===e(r).parents("li:first").find("ul, ol").length)t.cursorLists._del(r);else{var i=e(r).parents("li:first").find("ul:first, ol:first").find("li:first");i=i.find(t.html.blockTagsQuery()).get(-1)||i,i.prepend(r),t.cursorLists._backspace(r)}else c(r);else f(o(r)?r:r);e(r).remove(),t.$el.find("blockquote:empty").remove(),t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(!0),t.clean.quotes(),t.clean.lists(),t.html.normalizeSpaces(),t.selection.restore()}function u(){t.$el.find(".fr-to-remove").each(function(){for(var n=t.node.contents(this),o=0;o<n.length;o++)n[o].nodeType==Node.TEXT_NODE&&(n[o].textContent=n[o].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})}function g(n,o,r){var a,l=t.node.deepestParent(n,[],!r);if(l&&"BLOCKQUOTE"==l.tagName)return i(n,l)?(a=t.html.defaultTag(),a?e(l).after("<"+a+">"+e.FroalaEditor.MARKERS+"<br></"+a+">"):e(l).after(e.FroalaEditor.MARKERS+"<br>"),e(n).remove(),!1):(m(n,o,r),!1);if(null==l)e(n).replaceWith("<br/>"+e.FroalaEditor.MARKERS+"<br/>");else{var s=n,d="";(!t.node.isBlock(l)||o)&&(d="<br/>");var c="",f="";a=t.html.defaultTag();var p="",u="";a&&t.node.isBlock(l)&&(p="<"+a+">",u="</"+a+">");do if(s=s.parentNode,!o||s!=l||o&&!t.node.isBlock(l))if(c+=t.node.closeTagString(s),s==l&&t.node.isBlock(l))f=p+f;else{var g="A"==s.tagName&&i(n,s)?"fr-to-remove":"";f=t.node.openTagString(e(s).clone().addClass(g).get(0))+f}while(s!=l);d=c+d+f+(n.parentNode==l&&t.node.isBlock(l)?"":e.FroalaEditor.INVISIBLE_SPACE)+e.FroalaEditor.MARKERS,t.node.isBlock(l)&&!e(l).find("*:last").is("br")&&e(l).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),l.nextSibling&&!t.node.isBlock(l.nextSibling)||t.node.isBlock(l)||e(l).after("<br>");var h;h=!o&&t.node.isBlock(l)?t.node.openTagString(l)+e(l).html()+u:t.node.openTagString(l)+e(l).html()+t.node.closeTagString(l),h=h.replace(/<span id="fr-break"><\/span>/g,d),e(l).replaceWith(h)}}function h(n,o,a){var l=t.node.deepestParent(n,[],!a);if(l&&"BLOCKQUOTE"==l.tagName){if(r(n,l)){var s=t.html.defaultTag();return s?e(l).before("<"+s+">"+e.FroalaEditor.MARKERS+"<br></"+s+">"):e(l).before(e.FroalaEditor.MARKERS+"<br>"),e(n).remove(),!1}i(n,l)?g(n,o,!0):m(n,o,!0)}if(null==l)e(n).replaceWith("<br>"+e.FroalaEditor.MARKERS);else{if(t.node.isBlock(l))if(o)e(n).remove(),e(l).prepend("<br>"+e.FroalaEditor.MARKERS);else{if(t.node.isEmpty(l,!0))return g(n,o,a);e(l).before(t.node.openTagString(l)+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(n).remove()}}function m(n,o,a){var l=t.node.deepestParent(n,[],!a);if(null==l)(!n.nextSibling||t.node.isBlock(n.nextSibling))&&e(n).after("<br>"),e(n).replaceWith("<br>"+e.FroalaEditor.MARKERS);else{var s=n,d="";"PRE"==l.tagName&&(o=!0),(!t.node.isBlock(l)||o)&&(d="<br>");var c="",f="";do{var p=s;if(s=s.parentNode,"BLOCKQUOTE"==l.tagName&&t.node.isEmpty(p)&&!e(p).hasClass("fr-marker")&&e(p).find(n).length>0&&e(p).after(n),("BLOCKQUOTE"!=l.tagName||!i(n,s)&&!r(n,s))&&(!o||s!=l||o&&!t.node.isBlock(l))){c+=t.node.closeTagString(s);var u="A"==s.tagName&&i(n,s)?"fr-to-remove":"";f=t.node.openTagString(e(s).clone().addClass(u).get(0))+f}}while(s!=l);var g=l==n.parentNode&&t.node.isBlock(l)||n.nextSibling;if("BLOCKQUOTE"==l.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var h=t.html.defaultTag();d=c+d+(h?"<"+h+">":"")+e.FroalaEditor.MARKERS+"<br>"+(h?"</"+h+">":"")+f}else d=c+d+f+(g?"":e.FroalaEditor.INVISIBLE_SPACE)+e.FroalaEditor.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var m=t.node.openTagString(l)+e(l).html()+t.node.closeTagString(l);m=m.replace(/<span id="fr-break"><\/span>/g,d),e(l).replaceWith(m)}}function v(r){var i=t.markers.insert();if(!i)return!1;t.$el.get(0).normalize();var l=!1;e(i).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(r=!1,l=!0),e(i).parentsUntil(t.$el,"TD, TH").length&&(l=!1),n(i)?!a(i)||r||l?g(i,r,l):t.cursorLists._endEnter(i):o(i)?!a(i)||r||l?h(i,r,l):t.cursorLists._startEnter(i):!a(i)||r||l?m(i,r,l):t.cursorLists._middleEnter(i),u(),t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(!0),t.clean.lists(),t.html.normalizeSpaces(),t.selection.restore()}return{enter:v,backspace:d,del:p,isAtEnd:i}},e.FroalaEditor.MODULES.data=function(e){function t(e){return e}function n(e){if(!e)return e;for(var n="",i=t("charCodeAt"),a=t("fromCharCode"),l=f.indexOf(e[0]),s=1;s<e.length-2;s++){for(var d=o(++l),c=e[i](s),p="";/[0-9-]/.test(e[s+1]);)p+=e[++s];p=parseInt(p,10)||0,c=r(c,d,p),c^=l-1&31,n+=String[a](c)}return n}function o(e){for(var t=e.toString(),n=0,o=0;o<t.length;o++)n+=parseInt(t.charAt(o),10);return n>10?n%9+1:n}function r(e,t,n){for(var o=Math.abs(n);o-->0;)e-=t;return 0>n&&(e+=123),e}function i(e){return e&&"none"==e.css("display")?(e.remove(),!0):!1}function a(){return i(d)||i(c)}function l(){return e.$box?(e.$box.append(u(t(u("kTDD4spmKD1klaMB1C7A5RA1G3RA10YA5qhrjuvnmE1D3FD2bcG-7noHE6B2JB4C3xXA8WF6F-10RG2C3G3B-21zZE3C3H3xCA16NC4DC1f1hOF1MB3B-21whzQH5UA2WB10kc1C2F4D3XC2YD4D1C4F3GF2eJ2lfcD-13HF1IE1TC11TC7WE4TA4d1A2YA6XA4d1A3yCG2qmB-13GF4A1B1KH1HD2fzfbeQC3TD9VE4wd1H2A20A2B-22ujB3nBG2A13jBC10D3C2HD5D1H1KB11uD-16uWF2D4A3F-7C9D-17c1E4D4B3d1D2CA6B2B-13qlwzJF2NC2C-13E-11ND1A3xqUA8UE6bsrrF-7C-22ia1D2CF2H1E2akCD2OE1HH1dlKA6PA5jcyfzB-22cXB4f1C3qvdiC4gjGG2H2gklC3D-16wJC1UG4dgaWE2D5G4g1I2H3B7vkqrxH1H2EC9C3E4gdgzKF1OA1A5PF5C4WWC3VA6XA4e1E3YA2YA5HE4oGH4F2H2IB10D3D2NC5G1B1qWA9PD6PG5fQA13A10XA4C4A3e1H2BA17kC-22cmOB1lmoA2fyhcptwWA3RA8A-13xB-11nf1I3f1B7GB3aD3pavFC10D5gLF2OG1LSB2D9E7fQC1F4F3wpSB5XD3NkklhhaE-11naKA9BnIA6D1F5bQA3A10c1QC6Kjkvitc2B6BE3AF3E2DA6A4JD2IC1jgA-64MB11D6C4==")))),d=e.$box.find("> div:last"),c=d.find("> a"),void("rtl"==e.opts.direction&&d.css("left","auto").css("right",0))):!1}function s(){var n=e.opts.key||[""];"string"==typeof n&&(n=[n]),e.ul=!0;for(var o=0;o<n.length;o++){var r=u(n[o])||"";if(!(r!==u(t(u("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&r.indexOf(p,r.length-p.length)<0&&[u("9qqG-7amjlwq=="),u("KA3B3C2A6D1D5H5H1A3==")].indexOf(p)<0)){e.ul=!1;break}}e.ul===!0&&l(),e.events.on("contentChanged",function(){e.ul===!0&&a()&&l()})}var d,c,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",p=function(){for(var e=0,t=document.domain,n=t.split("."),o="_gd"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(o+"="+o);)t=n.slice(-1-++e).join("."),document.cookie=o+"="+o+";domain="+t+";";return document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}(),u=t(n);return{_init:s}},e.FroalaEditor.ENTER_P=0,e.FroalaEditor.ENTER_DIV=1,e.FroalaEditor.ENTER_BR=2,e.FroalaEditor.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FroalaEditor.DEFAULTS,{enter:e.FroalaEditor.ENTER_P,multiLine:!0,tabSpaces:0}),e.FroalaEditor.MODULES.keys=function(t){function n(){t.helpers.isIOS()&&(t.events.disableBlur(),t.selection.save(),t.$el.blur(),t.selection.restore(),t.events.enableBlur())}function o(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()),n()}function r(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function i(e){t.selection.isCollapsed()?t.cursor.backspace()||(e.preventDefault(),e.stopPropagation(),N=!1):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks(!0),N=!1),t.placeholder.refresh()}function a(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function l(n){if(t.browser.mozilla){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.markers.insert();var o=t.$el.find(".fr-marker").get(0),r=o.previousSibling;r&&r.nodeType==Node.TEXT_NODE&&1==r.textContent.length&&160==r.textContent.charCodeAt(0)?e(r).after(" "):e(o).before("&nbsp;"),e(o).replaceWith(e.FroalaEditor.MARKERS),t.selection.restore()}}function s(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!w){var e=t.selection.ranges(0),n=e.startContainer,o=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&o<=n.textContent.length&&o>0&&32==n.textContent.charCodeAt(o-1)&&(t.selection.save(),t.html.normalizeSpaces(),t.selection.restore())}}function d(){t.selection.isFull()&&setTimeout(function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FroalaEditor.MARKERS+"<br/></"+n+">"):t.$el.html(e.FroalaEditor.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()},0)}function c(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){e.preventDefault(),e.stopPropagation();for(var n="",o=0;o<t.opts.tabSpaces;o++)n+="&nbsp;";t.html.insert(n),t.placeholder.refresh()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function f(e){w=!1}function p(){return w}function u(n){t.events.disableBlur(),N=!0;var s=n.which;if(229===s)return w=!0,!0;w=!1;var d=E(s)&&!v(n),f=s==e.FroalaEditor.KEYCODE.BACKSPACE||s==e.FroalaEditor.KEYCODE.DELETE;if(t.selection.isFull()&&!t.opts.keepFormatOnDelete||f&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete){if(d||f){var p=t.html.defaultTag();p?t.$el.html("<"+p+">"+e.FroalaEditor.MARKERS+"<br/></"+p+">"):t.$el.html(e.FroalaEditor.MARKERS+"<br/>")}t.selection.restore()}s==e.FroalaEditor.KEYCODE.ENTER?n.shiftKey?r(n):o(n):s!=e.FroalaEditor.KEYCODE.BACKSPACE||v(n)?s!=e.FroalaEditor.KEYCODE.DELETE||v(n)?s==e.FroalaEditor.KEYCODE.SPACE?l(n):s==e.FroalaEditor.KEYCODE.TAB?c(n):v(n)||!E(n.which)||t.selection.isCollapsed()||t.selection.remove():a(n):i(n),t.events.enableBlur()}function g(n){for(var o=0;o<n.length;o++)n[o].nodeType==Node.TEXT_NODE&&/\u200B/gi.test(n[o].textContent)?(n[o].textContent=n[o].textContent.replace(/\u200B/gi,""),0===n[o].textContent.length&&e(n[o]).remove()):n[o].nodeType==Node.ELEMENT_NODE&&"IFRAME"!=n[o].nodeType&&g(t.node.contents(n[o]))}function h(){var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.$wp.offset().top-e(t.original_window).scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+e(t.original_window).scrollTop()+20)):(n=t.position.getBoundingRect().top,t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.original_window.innerHeight-20&&e(t.original_window).scrollTop(n+e(t.original_window).scrollTop()-t.original_window.innerHeight+20),n=t.position.getBoundingRect().top,t.opts.iframe&&(n+=t.$iframe.offset().top),n<t.$tb.height()+20&&e(t.original_window).scrollTop(n+e(t.original_window).scrollTop()-t.$tb.height()-20))}function m(n){if(w)return!1;if(!t.selection.isCollapsed())return!1;!n||n.which!=e.FroalaEditor.KEYCODE.ENTER&&n.which!=e.FroalaEditor.KEYCODE.BACKSPACE||n.which==e.FroalaEditor.KEYCODE.BACKSPACE&&N||h();for(var o=t.$el.find(t.html.blockTagsQuery()).andSelf().not("TD, TH").find(" > br"),r=0;r<o.length;r++){var i=o[r],a=i.previousSibling,l=i.nextSibling,s=t.node.blockParent(i)||t.$el.get(0);a&&s&&"BR"!=a.tagName&&!t.node.isBlock(a)&&!l&&e(s).text().replace(/\u200B/g,"").length>0&&e(a).text().length>0&&(t.selection.save(),e(i).remove(),t.selection.restore())}var d=function(t){if(!t)return!1;var n=e(t).html();return n=n.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""),n&&/\u200B/.test(n)&&n.replace(/\u200B/gi,"").length>0?!0:!1},c=t.selection.element();d(c)&&0===e(c).find("li").length&&!e(c).hasClass("fr-marker")&&"IFRAME"!=c.tagName&&(t.selection.save(),g(t.node.contents(c)),t.selection.restore())}function v(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function E(n){if(n>=e.FroalaEditor.KEYCODE.ZERO&&n<=e.FroalaEditor.KEYCODE.NINE)return!0;if(n>=e.FroalaEditor.KEYCODE.NUM_ZERO&&n<=e.FroalaEditor.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FroalaEditor.KEYCODE.A&&n<=e.FroalaEditor.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FroalaEditor.KEYCODE.SPACE:case e.FroalaEditor.KEYCODE.QUESTION_MARK:case e.FroalaEditor.KEYCODE.NUM_PLUS:case e.FroalaEditor.KEYCODE.NUM_MINUS:case e.FroalaEditor.KEYCODE.NUM_PERIOD:case e.FroalaEditor.KEYCODE.NUM_DIVISION:case e.FroalaEditor.KEYCODE.SEMICOLON:case e.FroalaEditor.KEYCODE.FF_SEMICOLON:case e.FroalaEditor.KEYCODE.DASH:case e.FroalaEditor.KEYCODE.EQUALS:case e.FroalaEditor.KEYCODE.FF_EQUALS:case e.FroalaEditor.KEYCODE.COMMA:case e.FroalaEditor.KEYCODE.PERIOD:case e.FroalaEditor.KEYCODE.SLASH:case e.FroalaEditor.KEYCODE.APOSTROPHE:case e.FroalaEditor.KEYCODE.SINGLE_QUOTE:case e.FroalaEditor.KEYCODE.OPEN_SQUARE_BRACKET:case e.FroalaEditor.KEYCODE.BACKSLASH:case e.FroalaEditor.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function b(e){var n=e.which;return v(e)||n>=37&&40>=n?!0:(C||(x=t.snapshot.get()),clearTimeout(C),void(C=setTimeout(function(){C=null,t.undo.saveStep()},500)))}function S(e){return v(e)?!0:void(x&&C&&(t.undo.saveStep(x),x=null))}function T(){C&&(clearTimeout(C),t.undo.saveStep(),x=null)}function y(){if(t.events.on("keydown",b),t.events.on("input",s),t.events.on("keyup",S),t.events.on("keypress",f),t.events.on("keydown",u),t.events.on("keyup",m),t.events.on("html.inserted",m),t.events.on("cut",d),t.$el.get(0).msGetInputContext)try{t.$el.get(0).msGetInputContext().addEventListener("MSCandidateWindowShow",function(){w=!0}),t.$el.get(0).msGetInputContext().addEventListener("MSCandidateWindowHide",function(){w=!1,m()})}catch(e){}}var N,C,x,w=!1;return{_init:y,ctrlKey:v,isCharacter:E,forceUndo:T,isIME:p}},e.extend(e.FroalaEditor.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowLocalImages:!1}),e.FroalaEditor.MODULES.paste=function(t){function n(n){f=t.html.getSelected(),p=e("<div>").html(f).text(),"cut"==n.type&&(t.undo.saveStep(),setTimeout(function(){t.html.wrap(),t.events.focus(),t.undo.saveStep()},0))}function o(e){if(e.originalEvent&&(e=e.originalEvent),t.events.trigger("paste.before",[e])===!1)return!1;if(u=t.$window.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var n="",o=e.clipboardData.types;if(t.helpers.isArray(o))for(var i=0;i<o.length;i++)n+=o[i]+";";else n=o;if(g="",/text\/html/.test(n)?g=e.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&t.browser.safari?g=e.clipboardData.getData("text/rtf"):/text\/plain/.test(n)&&!this.browser.mozilla&&(g=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==g)return l(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;g=null}r()}function r(){t.selection.save(),t.events.disableBlur(),g=null,h?h.html(""):(h=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; z-index: 9999; line-height: 140%;" tabindex="-1"></div>'),t.$box.after(h)),h.focus(),t.window.setTimeout(l,1)}function i(n){n=n.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),n=n.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),n=n.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),n=n.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),n=n.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),n=n.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),n=n.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),n=n.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),n=n.replace(/<!--[\s\S]*?-->/gi,""),n=n.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");for(var o=["style","script","applet","embed","noframes","noscript"],r=0;r<o.length;r++){var i=new RegExp("<"+o[r]+".*?"+o[r]+"(.*?)>","gi");n=n.replace(i,"")}n=n.replace(/&nbsp;/gi," "),n=n.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),n=n.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var a;do a=n,n=n.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"");while(n!=a);n=n.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),n=n.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),n=t.clean.html(n,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),n=n.replace(/<a>(.[^<]+)<\/a>/gi,"$1");var l=e("<div>").html(n);return l.find("li[data-indent]").each(function(t,n){var o=e(n);if(o.prev("li").length>0){var r=o.prev("li").find("> ul, > ol");0===r.length&&(r=e("ul"),o.prev("li").append(r)),r.append(n)}else o.removeAttr("data-indent")}),n=l.html()}function a(n){var o=e("<div>").html(n);o.find("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote").each(function(n,o){e(o).replaceWith("<"+(t.html.defaultTag()||"DIV")+">"+e(o).html()+"</"+(t.html.defaultTag()||"DIV")+">")}),e(o.find("*").not("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br").get().reverse()).each(function(){e(this).replaceWith(e(this).html())});var r=function(n){for(var o=t.node.contents(n),i=0;i<o.length;i++)3!=o[i].nodeType&&1!=o[i].nodeType?e(o[i]).remove():r(o[i])};return r(o.get(0)),o.html()}function l(){t.keys.forceUndo();var n=t.snapshot.get();null===g&&(g=h.html(),t.selection.restore(),t.events.enableBlur());var o=t.events.chainTrigger("paste.beforeCleanup",g);if("string"==typeof o&&(g=o),g.indexOf("<body")>=0&&(g=g.replace(/[.\s\S\w\W<>]*<body[^>]*>([.\s\S\w\W<>]*)<\/body>[.\s\S\w\W<>]*/g,"$1")),g.match(/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/gi)?(g=g.replace(/^\n*/g,"").replace(/^ /g,""),0===g.indexOf("<colgroup>")&&(g="<table>"+g+"</table>"),g=i(g),g=d(g)):(t.opts.htmlAllowComments=!1,g=t.clean.html(g,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowComments=!0,g=d(g),g=g.replace(/\r|\n|\t/g,""),p&&e("<div>").html(g).text().replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==p.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")&&(g=f),g=g.replace(/^ */g,"").replace(/ *$/g,"")),t.opts.pastePlain&&(g=a(g)),o=t.events.chainTrigger("paste.afterCleanup",g),"string"==typeof o&&(g=o),""!==g){var r=e("<div>").html(g);t.html.cleanBlankSpaces(r.get(0)),t.html.normalizeSpaces(r.get(0)),g=r.html(),t.html.insert(g,!0)}s(),t.undo.saveStep(n),t.undo.saveStep()}function s(){t.events.trigger("paste.after")}function d(t){for(var n,o=e("<div>").html(t),r=o.find("*:empty:not(br, img, td, th)");r.length;){for(n=0;n<r.length;n++)e(r[n]).remove();r=o.find("*:empty:not(br, img, td, th)")}for(var i=o.find("> div:not([style]), td > div, th > div, li > div");i.length;){var a=e(i[i.length-1]);a.replaceWith(a.html()+"<br>"),i=o.find("> div:not([style]), td > div, th > div, li > div")}for(i=o.find("div:not([style])");i.length;){for(n=0;n<i.length;n++){var l=e(i[n]),s=l.html().replace(/\u0009/gi,"").trim();l.replaceWith(s)}i=o.find("div:not([style])")}return o.html()}function c(){t.events.on("copy",n),t.events.on("cut",n),t.events.on("paste",o),t.events.on("beforepaste",o)}var f,p,u,g,h;return{_init:c}},e.FroalaEditor.MODULES.tooltip=function(t){function n(){t.$tooltip.removeClass("fr-visible").css("left","-3000px")}function o(n,o){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;n.removeAttr("title"),t.$tooltip.text(n.data("title")),t.$tooltip.addClass("fr-visible");var r=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;0>r&&(r=0),r+t.$tooltip.outerWidth()>e(t.original_window).width()&&(r=e(t.original_window).width()-t.$tooltip.outerWidth()),t.$tooltip.css("left",r),"undefined"==typeof o&&(o=t.opts.toolbarBottom),t.$tooltip.css("top",o?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight())}function r(r,i,a){t.helpers.isMobile()||(r.on("mouseenter",i,function(t){e(t.currentTarget).hasClass("fr-disabled")||o(e(t.currentTarget),a)}),r.on("mouseleave "+t._mousedown+" "+t._mouseup,i,function(e){n()})),t.events.on("destroy",function(){r.off("mouseleave "+t._mousedown+" "+t._mouseup,i),r.off("mouseenter",i)},!0)}function i(){t.helpers.isMobile()||(t.$tooltip=e('<div class="fr-tooltip"></div>'),t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.original_document).find("body").append(t.$tooltip),t.events.on("destroy",function(){t.$tooltip.html("").removeData().remove()},!0))}return{_init:i,hide:n,to:o,bind:r}},e.FroalaEditor.ICON_DEFAULT_TEMPLATE="font_awesome",e.FroalaEditor.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />"},e.FroalaEditor.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"
},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FroalaEditor.DefineIconTemplate=function(t,n){e.FroalaEditor.ICON_TEMPLATES[t]=n},e.FroalaEditor.DefineIcon=function(t,n){e.FroalaEditor.ICONS[t]=n},e.FroalaEditor.MODULES.icon=function(t){function n(t){var n=null,o=e.FroalaEditor.ICONS[t];if("undefined"!=typeof o){var r=o.template||e.FroalaEditor.ICON_DEFAULT_TEMPLATE;r&&(r=e.FroalaEditor.ICON_TEMPLATES[r])&&(n=r.replace(/\[([a-zA-Z]*)\]/g,function(e,n){return"NAME"==n?o[n]||t:o[n]}))}return n||t}return{create:n}},e.FroalaEditor.MODULES.button=function(t){function n(n){var o=e(n.currentTarget),r=o.next(),i=o.hasClass("fr-active"),a=(t.helpers.isMobile(),e(".fr-dropdown.fr-active").not(o));if(t.helpers.isIOS()&&0==t.$el.find(".fr-marker").length&&(t.selection.save(),t.selection.clear(),t.selection.restore()),!i){var l=o.data("cmd");r.find(".fr-command").removeClass("fr-active"),e.FroalaEditor.COMMANDS[l]&&e.FroalaEditor.COMMANDS[l].refreshOnShow&&e.FroalaEditor.COMMANDS[l].refreshOnShow.apply(t,[o,r]),r.css("left",o.offset().left-o.parent().offset().left-("rtl"==t.opts.direction?r.width()-o.outerWidth():0)),t.opts.toolbarBottom?r.css("bottom",t.$tb.height()-o.position().top):r.css("top",o.position().top+o.outerHeight())}o.addClass("fr-blink").toggleClass("fr-active"),setTimeout(function(){o.removeClass("fr-blink")},300),r.offset().left+r.outerWidth()>e(t.opts.scrollableContainer).offset().left+e(t.opts.scrollableContainer).outerWidth()&&r.css("margin-left",-(r.offset().left+r.outerWidth()-e(t.opts.scrollableContainer).offset().left-e(t.opts.scrollableContainer).outerWidth())),a.removeClass("fr-active")}function o(n){n.addClass("fr-blink"),setTimeout(function(){n.removeClass("fr-blink")},500);for(var o=n.data("cmd"),r=[];"undefined"!=typeof n.data("param"+(r.length+1));)r.push(n.data("param"+(r.length+1)));var i=e(".fr-dropdown.fr-active");i.length&&i.removeClass("fr-active"),t.commands.exec(o,r)}function r(t){var n=e(t.currentTarget);o(n)}function i(o){var i=e(o.currentTarget);0!=i.parents(".fr-popup").length||i.data("popup")||t.popups.hideAll(),i.hasClass("fr-dropdown")?n(o):(r(o),e.FroalaEditor.COMMANDS[i.data("cmd")]&&0!=e.FroalaEditor.COMMANDS[i.data("cmd")].refreshAfterCallback&&g())}function a(e){var t=e.find(".fr-dropdown.fr-active");t.length&&t.removeClass("fr-active")}function l(e){e.preventDefault(),e.stopPropagation()}function s(e){return e.stopPropagation(),t.opts.toolbarInline?!1:void 0}function d(n,o){t.events.bindClick(n,".fr-command:not(.fr-disabled)",i),n.on(t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",l),n.on(t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",s);var r=n.get(0).ownerDocument,d="defaultView"in r?r.defaultView:r.parentWindow,c=function(o){(!o||o.type==t._mouseup&&o.target!=e("html").get(0)||"keydown"==o.type&&(t.keys.isCharacter(o.which)&&!t.keys.ctrlKey(o)||o.which==e.FroalaEditor.KEYCODE.ESC))&&a(n)};e(d).on(t._mouseup+".command"+t.id+" resize.command"+t.id+" keydown.command"+t.id,c),e.merge(m,n.find(".fr-btn").toArray()),t.tooltip.bind(n,".fr-btn, .fr-title",o),t.events.on("destroy",function(){n.off(t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu"),n.on(t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper"),e(d).off(t._mouseup+".command"+t.id+" resize.command"+t.id+" keydown.command"+t.id)},!0)}function c(e,n){var o="";if(n.html)o+="function"==typeof n.html?n.html.call(t):n.html;else{var r=n.options;"function"==typeof r&&(r=r()),o+='<ul class="fr-dropdown-list">';for(var i in r)o+='<li><a class="fr-command" data-cmd="'+e+'" data-param1="'+i+'" title="'+r[i]+'">'+t.language.translate(r[i])+"</a></li>";o+="</ul>"}return o}function f(e,n,o){var r=n.displaySelection;"function"==typeof r&&(r=r(t));var i;if(r){var a="function"==typeof n.defaultSelection?n.defaultSelection(t):n.defaultSelection;i='<span style="width:'+(n.displaySelectionWidth||100)+'px">'+(a||t.language.translate(n.title))+"</span>"}else i=t.icon.create(n.icon||e);var l=n.popup?' data-popup="true"':"",s='<button type="button" tabindex="-1" title="'+(t.language.translate(n.title)||"")+'" class="fr-command fr-btn'+("dropdown"==n.type?" fr-dropdown":"")+(n.back?" fr-back":"")+(n.disabled?" fr-disabled":"")+(o?"":" fr-hidden")+'" data-cmd="'+e+'"'+l+">"+i+"</button>";if("dropdown"==n.type){var d='<div class="fr-dropdown-menu"><div class="fr-dropdown-wrapper"><div class="fr-dropdown-content" tabindex="-1">';d+=c(e,n),d+="</div></div></div>",s+=d}return s}function p(t,n){for(var o="",r=0;r<t.length;r++){var i=t[r],a=e.FroalaEditor.COMMANDS[i];if(a){var l="undefined"!=typeof n?n.indexOf(i)>=0:!0;o+=f(i,a,l)}else"|"==i?o+='<div class="fr-separator fr-vs"></div>':"-"==i&&(o+='<div class="fr-separator fr-hs"></div>')}return o}function u(n){var o,r=n.data("cmd");n.hasClass("fr-dropdown")?o=n.next():n.removeClass("fr-active"),e.FroalaEditor.COMMANDS[r]&&e.FroalaEditor.COMMANDS[r].refresh?e.FroalaEditor.COMMANDS[r].refresh.apply(t,[n,o]):t.refresh[r]?t.refresh[r](n,o):t.refresh["default"](n,r)}function g(){return 0==t.events.trigger("buttons.refresh")?!0:void setTimeout(function(){for(var n=t.selection.inEditor()&&t.core.hasFocus(),o=0;o<m.length;o++){var r=e(m[o]),i=r.data("cmd");0==r.parents(".fr-popup").length?n||e.FroalaEditor.COMMANDS[i]&&e.FroalaEditor.COMMANDS[i].forcedRefresh?u(r):r.hasClass("fr-dropdown")||r.removeClass("fr-active"):r.parents(".fr-popup").is(":visible")&&u(r)}},0)}function h(){t.events.on("mouseup",g),t.events.on("keyup",g),t.events.on("blur",g),t.events.on("focus",g),t.events.on("contentChanged",g)}var m=[];return{_init:h,buildList:p,bindCommands:d,refresh:u,bulkRefresh:g,exec:o}},e.FroalaEditor.MODULES.position=function(t){function n(){var n,o=t.selection.ranges(0);if(o&&o.collapsed&&t.selection.inEditor()){var r=!1;0==t.$el.find(".fr-marker").length&&(t.selection.save(),r=!0);var i=t.$el.find(".fr-marker:first");i.css("display","inline");var a=i.offset();i.css("display","none"),n={},n.left=a.left,n.width=0,n.height=parseInt(i.css("line-height"),10)||20,n.top=a.top-e(t.original_window).scrollTop(),n.right=1,n.bottom=1,n.ok=!0,r&&t.selection.restore()}else o&&(n=o.getBoundingClientRect());return n}function o(n,o,r){var i=n.outerHeight();if(!t.helpers.isMobile()&&t.$tb&&n.parent().get(0)!=t.$tb.get(0)){var a=(n.parent().height()-20-(t.opts.toolbarBottom?t.$tb.outerHeight():0),n.parent().offset().top),l=o-i-(r||0);n.parent().get(0)==e(t.opts.scrollableContainer).get(0)&&(a-=n.parent().position().top),a+o+i>e(t.original_document).outerHeight()&&n.parent().offset().top+l>0?(o=l,n.addClass("fr-above")):n.removeClass("fr-above")}return o}function r(n,o){var r=n.outerWidth();return n.parent().offset().left+o+r>e(t.opts.scrollableContainer).width()-10&&(o=e(t.opts.scrollableContainer).width()-r-10-n.parent().offset().left+e(t.opts.scrollableContainer).offset().left),n.parent().offset().left+o<e(t.opts.scrollableContainer).offset().left&&(o=10-n.parent().offset().left+e(t.opts.scrollableContainer).offset().left),o}function i(o){var r=n();o.css("top",0).css("left",0);var i=r.top+r.height,l=r.left+r.width/2-o.outerWidth()/2+e(t.original_window).scrollLeft();t.opts.iframe||(i+=e(t.original_window).scrollTop()),a(l,i,o,r.height)}function a(e,n,i,a){var l=i.data("container");l&&"BODY"!=l.get(0).tagName&&(e&&(e-=l.offset().left),n&&(n-=l.offset().top-l.scrollTop())),t.opts.iframe&&l&&t.$tb&&l.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),n&&(n+=t.$iframe.offset().top));var s=r(i,e);if(e){i.css("left",s);var d=i.find(".fr-arrow");d.data("margin-left")||d.data("margin-left",t.helpers.getPX(d.css("margin-left"))),d.css("margin-left",e-s+d.data("margin-left"))}n&&i.css("top",o(i,n,a))}function l(n){var o=e(n),r=o.parent(),i=o.is(".fr-sticky-on"),a=o.data("sticky-top"),l=o.data("sticky-scheduled");if("undefined"==typeof a&&(o.data("sticky-top",0),o.after('<div class="fr-sticky-dummy" style="height: '+o.outerHeight()+'px;"></div>'),o.data("sticky-dummy",o.next())),t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var s=e(window).scrollTop(),d=Math.min(Math.max(s-r.offset().top,0),r.outerHeight()-o.outerHeight());d!=a&&d!=l&&(clearTimeout(o.data("sticky-timeout")),o.data("sticky-scheduled",d),o.outerHeight()<s-r.offset().top&&o.addClass("fr-opacity-0"),o.data("sticky-timeout",setTimeout(function(){var n=e(window).scrollTop(),i=Math.min(Math.max(n-r.offset().top,0),r.outerHeight()-o.outerHeight());i>0&&"BODY"==r.get(0).tagName&&(i+=r.position().top),i!=a&&(o.css("top",Math.max(i,0)),o.data("sticky-top",i),o.data("sticky-scheduled",i)),o.removeClass("fr-opacity-0"),t.$tb.hasClass("fr-inline")&&t.toolbar.show()},100))),i||(o.css("top",""),o.width(r.width()),o.addClass("fr-sticky-on"))}else clearTimeout(e(n).css("sticky-timeout")),o.css("top",""),o.css("position",""),o.width(""),o.data("sticky-top",0),o.removeClass("fr-sticky-on"),t.$tb.hasClass("fr-inline")&&t.toolbar.hide()}function s(n){if(n.offsetWidth){var o,r,i=e(n),a=i.outerHeight(),l=i.data("sticky-position"),s=e("body"==t.opts.scrollableContainer?t.original_window:t.opts.scrollableContainer).outerHeight(),d=0,c=0;"body"!==t.opts.scrollableContainer&&(d=e(t.opts.scrollableContainer).offset().top,c=e(t.original_window).outerHeight()-d-s);var f="body"==t.opts.scrollableContainer?e(t.original_window).scrollTop():d,p=i.is(".fr-sticky-on");i.data("sticky-parent")||i.data("sticky-parent",i.parent());var u=i.data("sticky-parent"),g=u.offset().top,h=u.outerHeight();if(i.data("sticky-offset")||(i.data("sticky-offset",!0),i.after('<div class="fr-sticky-dummy" style="height: '+a+'px;"></div>')),!l){var m="auto"!==i.css("top")||"auto"!==i.css("bottom");m||i.css("position","fixed"),l={top:"auto"!==i.css("top"),bottom:"auto"!==i.css("bottom")},m||i.css("position",""),i.data("sticky-position",l),i.data("top",i.css("top")),i.data("bottom",i.css("bottom"))}var v=function(){return f+o>g&&g+h-a>=f+o},E=function(){return f+s-r>g+a&&g+h>f+s-r};o=t.helpers.getPX(i.data("top")),r=t.helpers.getPX(i.data("bottom"));var b=l.top&&v(),S=l.bottom&&E();b||S?(i.css("width",u.width()+"px"),p||(i.addClass("fr-sticky-on"),i.removeClass("fr-sticky-off"),i.css("top")&&("auto"!=i.data("top")?i.css("top",t.helpers.getPX(i.data("top"))+d):i.data("top","auto")),i.css("bottom")&&("auto"!=i.data("bottom")?i.css("bottom",t.helpers.getPX(i.data("bottom"))+c):i.css("bottom","auto")))):i.hasClass("fr-sticky-off")||(i.width(""),i.removeClass("fr-sticky-on"),i.addClass("fr-sticky-off"),i.css("top")&&"auto"!=i.css("top")&&i.css("top",0),i.css("bottom")&&i.css("bottom",0))}}function d(){var e=document.createElement("test"),n=e.style;return n.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==n.position.indexOf("sticky")&&!t.helpers.isIOS()&&!t.helpers.isAndroid()}function c(){if(!d())if(t._stickyElements=[],t.helpers.isIOS()){var n=function(){t.helpers.requestAnimationFrame()(n);for(var e=0;e<t._stickyElements.length;e++)l(t._stickyElements[e])};n(),e(t.original_window).on("scroll.sticky"+t.id,function(){if(t.core.hasFocus())for(var n=0;n<t._stickyElements.length;n++){var o=e(t._stickyElements[n]),r=o.parent(),i=e(window).scrollTop();o.outerHeight()<i-r.offset().top&&(o.addClass("fr-opacity-0"),o.data("sticky-top",-1),o.data("sticky-scheduled",-1))}})}else e("body"==t.opts.scrollableContainer?t.original_window:t.opts.scrollableContainer).on("scroll.sticky"+t.id,f),e(t.original_window).on("resize.sticky"+t.id,f),t.events.on("initialized",f),t.events.on("focus",f),e(t.original_window).on("resize","textarea",f)}function f(){for(var e=0;e<t._stickyElements.length;e++)s(t._stickyElements[e])}function p(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),d()||t._stickyElements.push(e.get(0))}function u(){e(t.original_window).off("scroll.sticky"+t.id),e(t.original_window).off("resize.sticky"+t.id)}function g(){c(),t.events.on("destroy",u,!0)}return{_init:g,forSelection:i,addSticky:p,refresh:f,at:a,getBoundingRect:n}},e.extend(e.FroalaEditor.DEFAULTS,{toolbarInline:!1,toolbarVisibleWithoutSelection:!0,toolbarSticky:!0,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","|","color","emoticons","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting","selectAll","html"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:["fullscreen","bold","italic","underline","fontFamily","fontSize","color","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting"],toolbarStickyOffset:0}),e.FroalaEditor.MODULES.toolbar=function(t){function n(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function o(){var o=e.merge([],r());n(o,t.opts.toolbarButtonsXS||[]),n(o,t.opts.toolbarButtonsSM||[]),n(o,t.opts.toolbarButtonsMD||[]),n(o,t.opts.toolbarButtons);for(var i=o.length-1;i>=0;i--)"-"!=o[i]&&"|"!=o[i]&&o.indexOf(o[i])<i&&o.splice(i,1);var a=t.button.buildList(o,r());t.$tb.append(a),t.button.bindCommands(t.$tb)}function r(){var e=t.helpers.screenSize();return b[e]}function i(){var e=r();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var n=0;n<e.length;n++)if("|"==e[n]||"-"==e[n])t.$tb.append(t.button.buildList([e[n]]));else{var o=t.$tb.find('> .fr-command[data-cmd="'+e[n]+'"]'),i=null;o.next().hasClass("fr-dropdown-menu")&&(i=o.next()),o.removeClass("fr-hidden").appendTo(t.$tb),i&&i.appendTo(t.$tb)}}function a(){e(t.original_window).on("resize.buttons."+t.id,i),e(t.original_window).on("orientationchange.buttons."+t.id,i)}function l(n,o){t.helpers.isMobile()?t.toolbar.show():setTimeout(function(){if(n&&n.which==e.FroalaEditor.KEYCODE.ESC);else if(t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection&&n&&"keyup"!=n.type||!t.selection.isCollapsed()&&!t.keys.isIME()||o)){if(0==t.events.trigger("toolbar.show"))return!1;t.helpers.isMobile()||t.position.forSelection(t.$tb),t.$tb.show()}},0)}function s(){return 0==t.events.trigger("toolbar.hide")?!1:void t.$tb.hide()}function d(){return 0==t.events.trigger("toolbar.show")?!1:void t.$tb.show()}function c(){t.events.on("window.mousedown",s),t.events.on("keydown",s),t.events.on("blur",s),t.events.on("window.mouseup",l),t.events.on("window.keyup",l),t.events.on("keydown",function(t){t&&t.which==e.FroalaEditor.KEYCODE.ESC&&s()}),t.$wp.on("scroll.toolbar",l),t.events.on("commands.after",l)}function f(){t.events.on("focus",l,!0),t.events.on("blur",s,!0)}function p(){t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.helpers.isMobile()?(t.helpers.isIOS()?(e("body").append(t.$tb),t.position.addSticky(t.$tb)):(t.$tb.addClass("fr-bottom"),t.$box.append(t.$tb),t.position.addSticky(t.$tb),t.opts.toolbarBottom=!0),t.$tb.addClass("fr-inline"),f(),t.opts.toolbarInline=!1):(e(t.opts.scrollableContainer).append(t.$tb),t.$tb.data("container",e(t.opts.scrollableContainer)),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),c(),t.opts.toolbarBottom=!1)):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$box.addClass("fr-basic"),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function u(){e(t.original_window).off("resize.buttons."+t.id),e(t.original_window).off("orientationchange.buttons."+t.id),t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove(),t.$tb.off(t._mousedown+" "+t._mouseup),t.$tb.html("").removeData().remove()}function g(){return t.$wp?(t.$tb=e('<div class="fr-toolbar"></div>'),t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),p(),v=t.$tb.get(0).ownerDocument,E="defaultView"in v?v.defaultView:v.parentWindow,o(),a(),t.$tb.on(t._mousedown+" "+t._mouseup,function(e){var t=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;return t&&"INPUT"!=t.tagName?(e.stopPropagation(),e.preventDefault(),!1):void 0}),void t.events.on("destroy",u,!0)):!1}function h(){!S&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh"),S=!0)}function m(){S&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh"),S=!1),t.button.bulkRefresh()}var v,E,b=[];b[e.FroalaEditor.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,b[e.FroalaEditor.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,b[e.FroalaEditor.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,b[e.FroalaEditor.LG]=t.opts.toolbarButtons;var S=!1;return{_init:g,hide:s,show:d,showInline:l,disable:h,enable:m}},e.FroalaEditor.SHORTCUTS_MAP={69:{cmd:"show"},66:{cmd:"bold"},73:{cmd:"italic"},85:{cmd:"underline"},83:{cmd:"strikeThrough"},221:{cmd:"indent"},219:{cmd:"outdent"},90:{cmd:"undo"},"-90":{cmd:"redo"}},e.extend(e.FroalaEditor.DEFAULTS,{shortcutsEnabled:["show","bold","italic","underline","strikeThrough","indent","outdent","undo","redo"]}),e.FroalaEditor.RegisterShortcut=function(t,n,o,r){e.FroalaEditor.SHORTCUTS_MAP[t*(r?-1:1)]={cmd:n,val:o},e.FroalaEditor.DEFAULTS.shortcutsEnabled.push(n)},e.FroalaEditor.MODULES.shortcuts=function(t){function n(n){var o=n.which;if(t.keys.ctrlKey(n)&&(n.shiftKey&&e.FroalaEditor.SHORTCUTS_MAP[-o]||!n.shiftKey&&e.FroalaEditor.SHORTCUTS_MAP[o])){var r=e.FroalaEditor.SHORTCUTS_MAP[o*(n.shiftKey?-1:1)].cmd;if(r&&t.opts.shortcutsEnabled.indexOf(r)>=0){var i,a=e.FroalaEditor.SHORTCUTS_MAP[o*(n.shiftKey?-1:1)].val;if(r&&!a?i=t.$tb.find('.fr-command[data-cmd="'+r+'"]'):r&&a&&(i=t.$tb.find('.fr-command[data-cmd="'+r+'"][data-param0="'+a+'"]')),i.length)return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&t.button.exec(i),!1;if(r&&t.commands[r])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&t.commands[r](),!1}}}function o(){t.events.on("keydown",n,!0),t.events.on("keyup",n,!0)}return{_init:o}},e.FroalaEditor.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,o=null,r=0;r<t.length;r++){if(o){var i=t[r].nodeType===Node.TEXT_NODE&&""===t[r].textContent,a=o.nodeType===Node.TEXT_NODE&&t[r].nodeType===Node.TEXT_NODE;i||a||n++}if(t[r]==e)return n;o=t[r]}}function n(n){var o=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)o.push(t(n)),n=n.parentNode;return o.reverse()}function o(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function r(e){return{scLoc:n(e.startContainer),scOffset:o(e.startContainer,e.startOffset),ecLoc:n(e.endContainer),ecOffset:o(e.endContainer,e.endOffset)}}function i(){var t={};if(e.events.trigger("snapshot.before"),t.html=e.$el.html(),t.ranges=[],e.selection.inEditor()&&e.core.hasFocus())for(var n=e.selection.ranges(),o=0;o<n.length;o++)t.ranges.push(r(n[o]));return e.events.trigger("snapshot.after"),t}function a(t){for(var n=e.$el.get(0),o=0;o<t.length;o++)n=n.childNodes[t[o]];return n}function l(t,n){try{var o=a(n.scLoc),r=n.scOffset,i=a(n.ecLoc),l=n.ecOffset,s=e.document.createRange();s.setStart(o,r),s.setEnd(i,l),t.addRange(s)}catch(d){}}function s(t){e.$el.html()!=t.html&&e.$el.html(t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var o=0;o<t.ranges.length;o++)l(n,t.ranges[o])}function d(e,t){return e.html!=t.html?!1:JSON.stringify(e.ranges)!=JSON.stringify(t.ranges)?!1:!0}return{get:i,restore:s,equal:d}},e.FroalaEditor.MODULES.undo=function(e){function t(t){var n=t.which,o=e.keys.ctrlKey(t);o&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}function n(){return 0===e.undo_stack.length||e.undo_index<=1?!1:!0}function o(){return e.undo_index==e.undo_stack.length?!1:!0}function r(t){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop();"undefined"==typeof t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(e.undo_stack.push(t),e.undo_index++,t.html!=d&&(e.events.trigger("contentChanged"),d=t.html))):e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++)}function i(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}}function a(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}}function l(){e.undo_index=0,e.undo_stack=[]}function s(){l(),e.events.on("initialized",function(){d=e.html.get(!1,!0)}),e.events.on("keydown",t)}var d=null;return{_init:s,run:i,redo:a,canDo:n,canRedo:o,reset:l,saveStep:r}},e.FroalaEditor.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FroalaEditor.RegisterTemplate=function(t,n){e.FroalaEditor.POPUP_TEMPLATES[t]=n},e.FroalaEditor.MODULES.popups=function(t){function n(e,t){b[e].data("container",t),t.append(b[e])}function o(o,r,l,s){if(a()&&t.$el.find(".fr-marker").length>0&&(t.events.disableBlur(),t.selection.restore()),p([o]),!b[o])return!1;var d=b[o].outerWidth(),c=(b[o].outerHeight(),i(o));b[o].addClass("fr-active").find("input, textarea").removeAttr("disabled");var f=b[o].data("container");t.opts.toolbarInline&&f&&t.$tb&&f.get(0)==t.$tb.get(0)&&(n(o,t.opts.toolbarInline?e(t.opts.scrollableContainer):t.$box),l&&(l=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top"))),r&&(r=t.$tb.offset().left+t.$tb.width()/2),t.$tb.hasClass("fr-above")&&(l+=t.$tb.outerHeight()),s=0),f=b[o].data("container"),!t.opts.iframe||s||c||(r&&(r-=t.$iframe.offset().left),l&&(l-=t.$iframe.offset().top)),r&&(r-=d/2),t.opts.toolbarBottom&&f&&t.$tb&&f.get(0)==t.$tb.get(0)&&(b[o].addClass("fr-above"),l-=b[o].outerHeight()),t.position.at(r,l,b[o],s||0);var u=b[o].find("input:visible, textarea:visible").get(0);u&&(0==t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save(),t.events.disableBlur(),e(u).select().focus()),t.opts.toolbarInline&&!t.helpers.isMobile()&&t.toolbar.hide(),t.events.trigger("popups.show."+o)}function r(e,n){t.events.on("popups.show."+e,n)}function i(e){return b[e]&&b[e].hasClass("fr-active")||!1}function a(){for(var e in b)if(i(e))return!0;return!1}function l(e){b[e]&&b[e].hasClass("fr-active")&&(b[e].removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.events.disableBlur(),b[e].find("input, textarea, button").filter(":focus").blur(),b[e].find("input, textarea").attr("disabled","disabled"))}function s(e,n){t.events.on("popups.hide."+e,n)}function d(e){return b[e]}function c(e,n){t.events.on("popups.refresh."+e,n)}function f(n){t.events.trigger("popups.refresh."+n);for(var o=b[n].find(".fr-command"),r=0;r<o.length;r++){var i=e(o[r]);0==i.parents(".fr-dropdown-menu").length&&t.button.refresh(i)}}function p(e){"undefined"==typeof e&&(e=[]);for(var t in b)e.indexOf(t)<0&&l(t)}function u(){S=!0}function g(){S=!1}function h(n,o){var r=e.FroalaEditor.POPUP_TEMPLATES[n];"function"==typeof r&&(r=r.apply(t));for(var i in o)r=r.replace("[_"+i.toUpperCase()+"_]",o[i]);return r}function m(n,o){var r=h(n,o),a=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+r+"</div>");t.opts.theme&&a.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&a.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),a.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var s=e("body");return s.append(a),a.data("container",s),b[n]=a,t.button.bindCommands(a,!1),e(t.original_window).on("resize.popups"+t.id,function(){t.helpers.isMobile()||(t.events.disableBlur(),l(n),t.events.enableBlur())}),a.on(t._mousedown+" "+t._mouseup,function(e){var t=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;return t&&"INPUT"!=t.tagName?(e.preventDefault(),e.stopPropagation(),!1):void e.stopPropagation()}),a.on("focus","input, textarea, button, select",function(n){if(n.preventDefault(),n.stopPropagation(),setTimeout(function(){t.events.enableBlur()},0),t.helpers.isMobile()){var o=e(t.original_window).scrollTop();setTimeout(function(){e(t.original_window).scrollTop(o)},0)}}),a.on("keydown","input, textarea, button, select",function(o){var r=o.which;if(e.FroalaEditor.KEYCODE.TAB==r){o.preventDefault();var s=a.find("input, textarea, button, select").filter(":visible").not(":disabled").toArray();s.sort(function(t,n){return o.shiftKey?e(t).attr("tabIndex")<e(n).attr("tabIndex"):e(t).attr("tabIndex")>e(n).attr("tabIndex")}),t.events.disableBlur();var d=s.indexOf(this)+1;d==s.length&&(d=0),e(s[d]).focus()}if(e.FroalaEditor.KEYCODE.ENTER==r)a.find(".fr-submit:visible").length>0&&(o.preventDefault(),o.stopPropagation(),t.events.disableBlur(),t.button.exec(a.find(".fr-submit:visible:first")));else{if(e.FroalaEditor.KEYCODE.ESC==r)return o.preventDefault(),o.stopPropagation(),t.$el.find(".fr-marker")&&(t.events.disableBlur(),e(this).data("skip",!0),t.selection.restore(),t.events.enableBlur()),i(n)&&a.find(".fr-back:visible").length?t.button.exec(a.find(".fr-back:visible:first")):l(n),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),!1;o.stopPropagation()}}),t.events.on("window.keydown",function(o){var r=o.which;if(e.FroalaEditor.KEYCODE.ESC==r){if(i(n)&&t.opts.toolbarInline)return o.stopPropagation(),i(n)&&a.find(".fr-back:visible").length?t.button.exec(a.find(".fr-back:visible:first")):(l(n),t.toolbar.showInline(null,!0)),!1;i(n)&&a.find(".fr-back:visible").length?t.button.exec(a.find(".fr-back:visible:first")):l(n)}}),t.$wp&&(t.events.on("keydown",function(o){t.keys.ctrlKey(o)||o.which==e.FroalaEditor.KEYCODE.ESC||(i(n)&&a.find(".fr-back:visible").length?t.button.exec(a.find(".fr-back:visible:first")):l(n))}),a.on("blur","input, textarea, button, select",function(n){document.activeElement!=this&&e(this).is(":visible")&&(t.events.blurActive()&&t.events.trigger("blur"),t.events.enableBlur())})),a.on("mousedown touchstart touch","*",function(e){["INPUT","TEXTAREA","BUTTON","SELECT","LABEL"].indexOf(e.currentTarget.tagName)>=0&&e.stopPropagation(),t.events.disableBlur()}),t.events.on("mouseup",function(e){a.is(":visible")&&S&&a.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},!0),t.events.on("window.mouseup",function(e){a.is(":visible")&&S&&(e.stopPropagation(),t.markers.remove(),l(n))},!0),t.events.on("blur",function(e){p()}),a.on("keydown keyup change input","input, textarea",function(t){var n=e(this).next();0==n.length&&e(this).after("<span>"+e(this).attr("placeholder")+"</span>"),e(this).toggleClass("fr-not-empty",""!=e(this).val())}),t.$wp&&!t.helpers.isMobile()&&t.$wp.on("scroll.popup"+n,function(o){if(i(n)&&a.parent().get(0)==e(t.opts.scrollableContainer).get(0)){var r=a.offset().top-t.$wp.offset().top,l=(t.$wp.scrollTop(),t.$wp.outerHeight());r>l||0>r?a.addClass("fr-hidden"):a.removeClass("fr-hidden")}}),t.helpers.isIOS()&&a.on("touchend","label",function(){e("#"+e(this).attr("for")).prop("checked",function(e,t){return!t})}),a}function v(){for(var n in b){var o=b[n];o.off("mousedown mouseup touchstart touchend"),o.off("focus","input, textarea, button, select"),o.off("keydown","input, textarea, button, select"),o.off("blur","input, textarea, button, select"),o.off("keydown keyup change","input, textarea"),o.off(t._mousedown,"*"),o.html("").removeData().remove(),e(t.original_window).off("resize.popups"+t.id),t.$wp&&t.$wp.off("scroll.popup"+n)}}function E(){t.events.on("destroy",v,!0),t.events.on("window.mousedown",u),t.events.on("window.touchmove",g),t.events.on("mousedown",function(e){a()&&t.$el.find(".fr-marker").remove()}),t.events.on("window.mouseup",function(){S=!1})}var b={},S=!1;return{_init:E,create:m,get:d,show:o,hide:l,onHide:s,hideAll:p,setContainer:n,refresh:f,onRefresh:c,onShow:r,isVisible:i,areVisible:a}},e.FroalaEditor.MODULES.refresh=function(t){function n(e,n){try{t.document.queryCommandState(n)===!0&&e.addClass("fr-active")}catch(o){}}function o(e){e.toggleClass("fr-disabled",!t.undo.canDo())}function r(e){e.toggleClass("fr-disabled",!t.undo.canRedo())}function i(e){if(e.hasClass("fr-no-refresh"))return!1;for(var n=t.selection.blocks(),o=0;o<n.length;o++){if("LI"!=n[o].tagName||n[o].previousSibling)return e.removeClass("fr-disabled"),!0;e.addClass("fr-disabled")}}function a(n){if(n.hasClass("fr-no-refresh"))return!1;for(var o=t.selection.blocks(),r=0;r<o.length;r++){var i="rtl"==t.opts.direction||"rtl"==e(o[r]).css("direction")?"margin-right":"margin-left";if("LI"==o[r].tagName||"LI"==o[r].parentNode.tagName)return n.removeClass("fr-disabled"),!0;if(t.helpers.getPX(e(o[r]).css(i))>0)return n.removeClass("fr-disabled"),!0}n.addClass("fr-disabled")}return{"default":n,undo:o,redo:r,outdent:a,indent:i}},e.extend(e.FroalaEditor.DEFAULTS,{editInPopup:!1}),e.FroalaEditor.MODULES.textEdit=function(t){function n(){var e='<div id="fr-text-edit-'+t.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+t.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>",n={edit:e};t.popups.create("text.edit",n)}function o(){var n=t.popups.get("text.edit");n.find("input").val(t.$el.text()).trigger("change"),t.popups.setContainer("text.edit",e("body")),t.popups.show("text.edit",t.$el.offset().left+t.$el.outerWidth()/2,t.$el.offset().top+t.$el.outerHeight(),t.$el.outerHeight())}function r(){t.$el.on(t._mouseup,function(e){setTimeout(function(){o()},10)})}function i(){var e=t.popups.get("text.edit");t.$el.text(e.find("input").val()),t.events.trigger("contentChanged"),t.popups.hide("text.edit")}function a(){t.opts.editInPopup&&(n(),r())}return{_init:a,update:i}},e.FroalaEditor.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}})});